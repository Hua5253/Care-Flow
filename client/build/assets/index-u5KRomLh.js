var ct=Object.defineProperty;var dt=(n,r,a)=>r in n?ct(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a;var qe=(n,r,a)=>(dt(n,typeof r!="symbol"?r+"":r,a),a);import{u as H,j as e,B as p,C as G,T as D,a as w,b as ut,r as l,I as ee,d as ht,P as xt,F as Xe,D as ue,L as le,c as X,e as ie,f as ft,g as ce,h as mt,l as pt,R as Z,A as gt,i as de,k as Oe,M as we,m as R,n as F,o as re,p as te,q as oe,s as O,t as x,v as L,w as J,x as $,y as Ke,z as ge,E as je,S as be,G as ye,H as Ce,J as jt,K as bt,N as yt,O as De,Q as E,U as Fe,V as Ct,W as Me,X as Ee,Y as ve,Z as Be,_ as me,$ as Ze,a0 as et,a1 as $e,a2 as wt,a3 as vt,a4 as tt,a5 as St,a6 as kt,a7 as Pt,a8 as We,a9 as It,aa as Ue,ab as rt,ac as Tt,ad as Mt,ae as Et,af as Bt,ag as Dt,ah as At,ai as Nt,aj as Rt,ak as qt,al as _t,am as Lt}from"./vendor-C3PN-7Lh.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}})();function Ot(){const n={backgroundColor:"hsla(200,100%,50%,0.2);",color:"black",padding:"2em",border:"2px solid #A8A8A8",borderRadius:2,boxShadow:5,textAlign:"center",width:"fit-content"},r={backgroundColor:"#1976d2",":hover":{backgroundColor:"#0d47a1"},color:"white",margin:{m:"1em"},border:"1px solid #A8A8A8"},a={height:"auto",width:"100%",textAlign:"center",maxWidth:{xs:"100%",sm:"200px",md:"250px"}},s=H(),t=()=>{s("/login")};return e.jsx(p,{sx:n,id:"splash-modal",children:e.jsxs(G,{children:[e.jsx(D,{variant:"h3",gutterBottom:!0,component:"h1",children:"Welcome To CareFlow!"}),e.jsx(D,{variant:"subtitle1",sx:{mb:4},children:"A platform to provide quality care as quickly and efficiently as possible"}),e.jsx(p,{component:"img",sx:a,alt:"Hospital illustration",src:"https://i.imgur.com/KoIVCtj.png",style:{width:"100%"}}),e.jsx("div",{children:e.jsx(w,{sx:r,onClick:t,id:"login",children:"Login"})})]})})}const se=ut.create({baseURL:"http://18.222.46.211:4000",withCredentials:!0});class Ft{constructor(r){qe(this,"endpoint");this.endpoint=r}getAll(r){return se.get(this.endpoint,{params:r})}getById(r){return se.get(this.endpoint+"/"+r)}create(r){return se.post(this.endpoint,r)}updateById(r,a){return se.put(this.endpoint+"/"+r,a)}deleteById(r){return se.delete(this.endpoint+"/"+r)}updateByPath(r,a){return se.put(this.endpoint+"/"+r,a)}}const ne=n=>new Ft(n),ot=ne("/users/notification"),$t=n=>n?new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",Wt=n=>{if(!n)return"";const[r,a,s,t,o,i,c]=n.split(":");return[s,`${t.substring(0,15)}...`,$t(`${o}:${i}:${c}`)].filter(u=>u).join(",")},Ut={wordWrap:"break-word",backgroundColor:"#e0e0e0",borderBottom:"1px solid #f9f9f9",boxShadow:1,mb:1,mt:1,width:"100%",borderRadius:"10px","&:last-child":{mb:0},"&:hover":{backgroundColor:"#B8BEC1"}},zt={backgroundColor:"#9DB4C0",mb:1,borderRadius:"10px",borderBottom:"1px solid #f9f9f9",boxShadow:1,width:"100%",mt:1,"&:hover":{backgroundColor:"#7D9BA6"}};function Ht(n){const r=H(),{dataSource:a=[]}=n,[s,t]=l.useState(null),o=f=>{t(f.currentTarget)},i=()=>{t(null)},c=!!s,u=c?"simple-popover":void 0,d=async({id:f,type:b})=>{const h=JSON.parse(localStorage.getItem("profile")||"{}"),{data:m}=await ot.updateByPath("status/read",{posterId:f});m&&r(b==="message"?`/messages/${h.role}?id=${f}`:"/schedule")};return e.jsxs(p,{sx:{display:"flex",alignItem:"center",justifyContent:"center"},children:[e.jsx(ee,{color:"inherit",onClick:o,size:"large","aria-describedby":u,children:e.jsx(ht,{})}),e.jsxs(xt,{id:u,open:c,anchorEl:s,onClose:i,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},color:"#f3f6f4",TransitionComponent:Xe,sx:{mt:1.5,"& .MuiPopover-paper":{width:"20vw",backgroundColor:"#ffffff",p:2,borderRadius:1,boxShadow:10,overflow:"visible","&::before":{content:'""',display:"block",position:"absolute",top:0,left:"50%",width:20,height:20,bgcolor:"background.paper",transform:"translateX(-50%) translateY(-50%) rotate(45deg)",zIndex:0,overflow:"scroll"}}},children:[e.jsx(D,{sx:{p:2,cursor:"default"},variant:"h6",children:"Notifications"}),e.jsx(ue,{sx:{borderColor:"#bcbcbc"}}),e.jsx(le,{sx:{pt:0},children:a.map(f=>{var b,h,m,M;return f.type==="message"?e.jsxs(X,{onClick:()=>{var S,y;return d({id:(y=(S=f==null?void 0:f.content)==null?void 0:S.split(":"))==null?void 0:y[0],type:f.type})},sx:zt,children:[e.jsx(ie,{children:e.jsx(ft,{color:"action"})}),e.jsx(ce,{primary:f==null?void 0:f.name,secondary:((h=(b=f==null?void 0:f.content)==null?void 0:b.split(":"))==null?void 0:h[1])||"-"})]},f._id):e.jsxs(X,{onClick:()=>{var S,y;return d({id:(y=(S=f==null?void 0:f.content)==null?void 0:S.split(":"))==null?void 0:y[0],type:f.type})},sx:Ut,children:[e.jsx(ie,{children:e.jsx(mt,{color:"action"})}),e.jsx(ce,{primary:((M=(m=f==null?void 0:f.content)==null?void 0:m.split(":"))==null?void 0:M[1])||"-",secondary:Wt(f==null?void 0:f.content)})]},f._id)})}),a.length===0&&e.jsx(p,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",mt:1,p:2},children:e.jsx(D,{variant:"caption",component:"div",gutterBottom:!0,children:"No New Notifications"})})]})]})}class Gt{constructor(r){qe(this,"endpoint");this.endpoint=r}login({username:r,password:a}){return se.post(`${this.endpoint}/login`,{username:r,password:a})}logout(){return se.post(`${this.endpoint}/logout`)}}const Jt=n=>new Gt(n),He=Jt("/auth"),ke={LOGIN_USER:"LOGIN_USER",LOGOUT_USER:"LOGOUT_USER"},Ae=l.createContext({});function Yt({children:n}){const[r,a]=l.useState({user:null,role:"",loggedIn:!1,errorMsg:"",accessToken:""}),s=t=>{const{type:o,payload:i}=t;switch(o){case ke.LOGIN_USER:return a({user:i.user,loggedIn:i.loggedIn,errorMsg:i.errorMsg,role:i.role,accessToken:i.accessToken});case ke.LOGOUT_USER:return a({user:null,loggedIn:!1,errorMsg:"",role:"",accessToken:""})}};return r.loginUser=async function(t,o){var i;try{const c=await He.login({username:t,password:o});if(c.status===200){const u=(i=c==null?void 0:c.data)==null?void 0:i.accessToken;s({type:ke.LOGIN_USER,payload:{user:c.data.user,role:c.data.user.role,loggedIn:!0,errorMsg:null,accessToken:u}}),c.data.user&&localStorage.setItem("profile",JSON.stringify(c.data.user))}c.status===401&&console.log("unauthorized")}catch(c){s({type:ke.LOGIN_USER,payload:{user:r.user,loggedIn:!1,errorMsg:c.response.data.errorMsg}})}},r.logoutUser=async function(){try{(await He.logout()).status===200&&(console.log("logout user"),s({type:ke.LOGOUT_USER,payload:null}))}catch(t){console.log(t)}},e.jsx(Ae.Provider,{value:{auth:r,setAuth:a},children:n})}const Qt="http://18.222.46.211:4000/chatroom",Y=pt(Qt,{forceNew:!0});function Ne({cred:n}){var M,S,y,v;const r=H(),[a,s]=l.useState([]),{auth:t}=l.useContext(Ae),o=n,[i,c]=Z.useState(null),u=!!i,d=k=>{c(k.currentTarget)},f=()=>{c(null)},b=()=>{r("/login")},h=async()=>{await t.logoutUser(),r("/"),localStorage.clear()};t.user?console.log((M=t.user)==null?void 0:M.name,(S=t.user)==null?void 0:S.role):console.log("no auth");const m=async()=>{const k=JSON.parse(localStorage.getItem("profile")||"{}"),{data:T=[]}=await ot.getAll({userId:k._id});s(T.filter(B=>!B.read_status))};return l.useEffect(()=>{m()},[]),l.useEffect(()=>{async function k(T){const B=JSON.parse(localStorage.getItem("profile")||"{}");T.receiverId===B._id&&T.content&&m()}return Y.on("notification",k),()=>{Y.off("notification",k)}},[]),e.jsx(gt,{sx:{flexGrow:1,zIndex:k=>k.zIndex.drawer+1},id:"navbar",position:"fixed",children:e.jsxs(de,{children:[e.jsx(D,{variant:"h5",noWrap:!0,sx:{flexGrow:1,textAlign:"left",paddingLeft:"2em","&:hover":{cursor:"default"}},children:"CareFlow"}),o?e.jsxs(e.Fragment,{children:[e.jsx(Ht,{dataSource:a}),e.jsxs(p,{sx:{paddingLeft:"2em",paddingRight:"2em",display:"flex",alignItems:"center"},children:[e.jsxs(ee,{onClick:d,sx:{gap:"8px"},children:[e.jsx(Oe,{variant:"rounded",children:(y=t.user)==null?void 0:y.name[0]}),e.jsx(D,{variant:"body1",noWrap:!0,sx:{color:"white"},children:(v=t.user)==null?void 0:v.name})]}),e.jsxs(we,{anchorEl:i,id:"account-menu",open:u,onClose:f,onClick:f,color:"#f3f6f4",TransitionComponent:Xe,sx:{overflow:"visible",mt:1,"& .MuiPaper-root":{overflow:"visible","&::before":{content:'""',display:"block",position:"absolute",top:0,right:"40%",width:20,height:20,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[e.jsx(R,{children:"Change Password"}),e.jsx(R,{onClick:h,children:"Logout"})]})]})]}):e.jsx(w,{color:"inherit",onClick:b,children:"Login"})]})})}function Vt(){return e.jsxs(G,{id:"splashScreen",sx:{display:"flex",flexDirection:"column",justifyContent:{xs:"center",s:"flex-start",md:"flex-start"},alignItems:"center",pt:{xs:2,sm:12,md:10,lg:18},minHeight:"100vh",width:"100%"},children:[e.jsx(Ne,{cred:!1}),e.jsx(Ot,{})]})}const Xt=[{id:"name",label:"Pathway Name",minWidth:170},{id:"patient",label:"Patient",minWidth:170,align:"center"},{id:"status",label:"Status",minWidth:170,align:"center"},{id:"open",label:"",minWidth:170,align:"right"}];function Kt({pathways:n,showModal:r,handleEditPathway:a}){const s=H();return e.jsxs(p,{sx:{flexGrow:1,width:"100%",height:"fit-content",minWidth:0,alignItems:"center",justifyContent:"center"},children:[e.jsx(D,{variant:"h4",pb:1,gutterBottom:!0,children:"Pathway"}),e.jsx(F,{sx:{width:"100%",overflow:"hidden",border:"solid 0.1em grey",shadow:"inherit"},children:e.jsx(re,{sx:{maxHeight:440},children:e.jsxs(te,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(oe,{children:e.jsx(O,{children:Xt.map(t=>e.jsx(x,{align:t.align,style:{minWidth:t.minWidth},children:t.label&&e.jsx(L,{active:!0,sx:{fontWeight:700},children:t.label})},t.id))})}),e.jsx(J,{children:n.map(t=>e.jsxs(O,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(x,{children:t.name}),e.jsx(x,{align:"center",children:t.patient}),e.jsx(x,{align:"center",children:t.status}),e.jsxs(x,{align:"right",children:[e.jsx(w,{variant:"contained",sx:{m:1},onClick:()=>a(t._id),children:"Edit"}),e.jsx(w,{variant:"contained",sx:{m:1},onClick:()=>s(`/manager-pathway/${t._id}`),children:"Open"})]})]},t._id))})]})})}),e.jsx(w,{variant:"contained",sx:{m:1},onClick:r,children:"Add Pathway"})]})}const pe=ne("/templatePathway"),Q=ne("/pathway"),Zt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:400,bgcolor:"#5C6B73",border:"2px solid #000",boxShadow:24,pt:2,px:4,pb:3};function er({handleClose:n}){const[r,a]=l.useState([]),[s,t]=l.useState(null),o=H();l.useEffect(()=>{pe.getAll().then(({data:u})=>a(u))},[]);const i=u=>{const d=r.find(f=>f.name===u.target.value);t(d||null)},c=()=>{console.log(s);const u={...s,is_template:!1};Q.create(u).then(({data:d})=>o("/manager-pathway/"+d._id)).catch(d=>console.log(d))};return e.jsx(e.Fragment,{children:e.jsx($,{open:!0,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:e.jsxs(p,{sx:{...Zt,width:200,textAlign:"center"},children:[e.jsx(ee,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:u=>u.palette.grey[500]},children:e.jsx(Ke,{})}),e.jsx("h2",{id:"child-modal-title",children:"Create Pathway"}),e.jsx("p",{children:"Procedure Template"}),e.jsxs(ge,{fullWidth:!0,children:[e.jsx(je,{id:"procedure-template-label",children:"Choose a template"}),e.jsx(be,{labelId:"procedure-template-label",id:"procedure-template-select",value:s?s.name:"",label:"Procedure Template",onChange:i,sx:{mb:2},children:r.map(u=>e.jsx(R,{value:u.name,children:u.name},u._id))})]}),e.jsx(w,{variant:"contained",onClick:c,children:"Create"})]})})})}const tr={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#5C6B73",border:"2px solid #000",boxShadow:24,pt:2,px:4,pb:3};function rr({handleClose:n,createBlankPathway:r}){const[a,s]=l.useState(!1);return e.jsx("div",{children:e.jsx($,{open:!0,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:e.jsxs(p,{sx:{...tr,width:400,textAlign:"center","& button":{m:1}},children:[e.jsx(ee,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:t=>t.palette.grey[500]},children:e.jsx(Ke,{})}),e.jsx("h2",{id:"parent-modal-title",children:"Create Pathway"}),e.jsx(w,{variant:"contained",onClick:()=>{s(!0)},children:"Template"}),e.jsx(w,{variant:"contained",onClick:r,children:"Blank Pathway"}),a&&e.jsx(er,{handleClose:()=>s(!1)})]})})})}function ae({cred:n}){return e.jsx(p,{sx:{display:"flex",overflow:"auto"},children:e.jsx(Ne,{cred:n})})}const or=240;function Se(){const n=[{icon:e.jsx(jt,{}),name:"Resource",path:"/resources"},{icon:e.jsx(bt,{}),name:"Pathway",path:"/manager-pathway"},{icon:e.jsx(yt,{}),name:"Template",path:"/manager-template"},{icon:e.jsx(De,{}),name:"Message",path:"/Messages/manager"}],r=H(),a=s=>{r(s)};return e.jsxs(p,{children:[e.jsxs(ye,{sx:{flexShrink:0,"& .MuiDrawer-paper":{width:or,boxSizing:"border-box"},display:{xs:"none",s:"none",md:"none",lg:"block",xl:"block"}},variant:"permanent",anchor:"left",children:[e.jsx(de,{}),e.jsx(le,{children:n.map(({icon:s,name:t,path:o},i)=>e.jsx(X,{disablePadding:!0,children:e.jsxs(Ce,{onClick:()=>a(o),sx:{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"inherit","&:hover":{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"#f4f4f4"},borderRight:location.pathname===o||location.pathname.includes(o)?"5px solid #2196f3":"none"},children:[e.jsx(ie,{sx:{"& .MuiSvgIcon-root":{fontSize:"2rem"}},children:s}),e.jsx(ce,{primary:t})]})},i))})]}),e.jsxs(ye,{open:!0,sx:{flexShrink:0,display:{lg:"none",xl:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:"100px"}},variant:"persistent",anchor:"left",children:[e.jsx(de,{}),e.jsx(le,{children:n.map(({icon:s,name:t,path:o},i)=>e.jsx(X,{disablePadding:!0,children:e.jsx(Ce,{onClick:()=>a(o),sx:{justifyContent:"center",pl:"auto",backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"inherit","&:hover":{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"#f4f4f4"},borderRight:location.pathname===o||location.pathname.includes(o)?"5px solid #2196f3":"none"},children:e.jsx(ie,{sx:{minWidth:"auto","& .MuiSvgIcon-root":{fontSize:"2rem"}},id:t,children:s})})},i))})]})]})}function nr({open:n,handleClose:r}){const[a,s]=l.useState(""),[t,o]=l.useState(""),i=H(),c=()=>{let d={name:a,patient:t,status:"unpublished",is_template:!1,procedures:[]};Q.create(d).then(f=>{i("/manager-pathway/"+f.data._id)}).catch(f=>console.log(f)),r()},u={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#5C6B73",boxShadow:24,p:4};return e.jsx($,{open:n,onClose:r,"aria-labelledby":"blank-pathway-modal-title",children:e.jsxs(p,{sx:u,children:[e.jsx(D,{id:"blank-pathway-modal-title",variant:"h6",component:"h2",children:"Create New Pathway"}),e.jsx(E,{fullWidth:!0,margin:"normal",required:!0,label:"Pathway Name",value:a,onChange:d=>s(d.target.value)}),e.jsx(E,{fullWidth:!0,margin:"normal",required:!0,label:"Patient",value:t,onChange:d=>o(d.target.value)}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[e.jsx(w,{variant:"contained",color:"primary",onClick:c,children:"Confirm"}),e.jsx(w,{variant:"contained",onClick:r,children:"Cancel"})]})]})})}const ar={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},Ge={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2};function sr({pathway:n,showModal:r,handleClose:a,handleEditPathway:s}){const[t,o]=l.useState(""),[i,c]=l.useState(""),[u,d]=l.useState({pathwayName:"",patient:""});l.useEffect(()=>{n&&(o(n.name||""),c(n.patient||""))},[n]);const f=()=>{let b=!1,h={pathwayName:"",patient:""};return t.trim()?t.length>50&&(h.pathwayName="Pathway name must be less than 50 characters.",b=!0):(h.pathwayName="Pathway name is required.",b=!0),i.trim()||(h.patient="Patient name is required.",b=!0),d(h),!b};return e.jsx("div",{children:e.jsx($,{open:r,onClose:a,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:ar,children:[e.jsx(D,{id:"pathway-modal-title",variant:"h6",component:"h2",color:"common.white",children:"Pathway Information"}),e.jsx(E,{required:!0,id:"pathway-name",label:"Pathway Name",value:t,onChange:b=>{o(b.target.value),d(h=>({...h,pathwayName:""}))},error:!!u.pathwayName,helperText:u.pathwayName,sx:Ge}),e.jsx(E,{id:"patient-name",label:"Patient Name",value:i,onChange:b=>{c(b.target.value),d(h=>({...h,patient:""}))},error:!!u.patient,helperText:u.patient,sx:Ge}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:()=>{f()&&(s(t,i),a())},children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:a,children:"Cancel"})]})]})})})}function lr(){const[n,r]=l.useState(!1),[a,s]=l.useState(!1),[t,o]=l.useState(!1),[i,c]=l.useState([]),[u,d]=l.useState({});l.useEffect(()=>{Q.getAll().then(m=>{c(m.data)}).catch(m=>console.log(m))},[u]);const f=()=>{r(!0)},b=m=>{o(!0),Q.getById(m).then(({data:M})=>{d(M)})},h=(m,M)=>{const S={...u,name:m,patient:M};Q.updateById(u._id,S).then(()=>{const y=i.map(v=>v._id===u._id?{...v,name:m,patient:M}:v);c(y),o(!1)})};return e.jsxs(G,{sx:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh"},children:[e.jsx(ae,{cred:!0}),e.jsx(Se,{}),e.jsx(p,{component:"main",sx:{mt:"75px",ml:{sm:"100px",md:"120px"},pl:{sm:"50px",md:"40px"},backgroundColor:"#f5f5f5",width:"80%",height:"90%",pr:9,pt:2,pb:2,overflow:"scroll"},children:e.jsx(Kt,{showModal:f,pathways:i,handleEditPathway:b})}),n&&e.jsx(rr,{handleClose:()=>r(!1),createBlankPathway:()=>s(!0)}),e.jsx(nr,{open:a,handleClose:()=>s(!1)}),e.jsx(sr,{pathway:u,showModal:t,handleClose:()=>o(!1),handleEditPathway:h})]})}const ir=({pathway:n})=>e.jsx(F,{elevation:2,sx:{padding:2,marginBottom:2},children:e.jsxs(p,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(D,{variant:"h6",sx:{marginRight:2},children:["Pathway Name: ",n==null?void 0:n.name]}),e.jsxs(D,{variant:"subtitle1",sx:{marginRight:2},children:["Patient: ",n==null?void 0:n.patient]}),e.jsxs(D,{variant:"subtitle1",children:["Status: ",n==null?void 0:n.status]})]})}),W=ne("/procedure");function cr({inEdit:n,pathway:r,handleDeleteProcedure:a,handleEditProcedure:s,refetchToggle:t}){var u;const[o,i]=l.useState([]);l.useEffect(()=>{W.getAll().then(d=>i(d.data)).catch(d=>console.log(d))},[r.procedures,t]);const c=[];for(let d of o)(u=r.procedures)!=null&&u.includes(d._id)&&c.push(d);return e.jsxs(te,{children:[e.jsx(oe,{children:e.jsxs(O,{children:[e.jsx(x,{children:"Date"}),e.jsx(x,{children:"Time"}),e.jsx(x,{children:"Procedure"}),e.jsx(x,{children:"Status"}),e.jsx(x,{children:"Location"}),e.jsx(x,{})]})}),e.jsx(J,{children:c==null?void 0:c.map((d,f)=>e.jsxs(O,{hover:!0,sx:{cursor:"pointer"},children:[e.jsx(x,{children:dr(d.start.toString())}),e.jsx(x,{children:ur(d.start.toString())}),e.jsx(x,{children:d.name}),e.jsx(x,{children:d.status}),e.jsx(x,{children:d.location}),e.jsx(x,{children:n&&e.jsxs("div",{children:[e.jsx(w,{variant:"outlined",size:"small",sx:{marginRight:"8px"},onClick:()=>s(d._id),children:"Edit"}),e.jsx(w,{variant:"outlined",size:"small",onClick:()=>a(d._id),children:"Delete"})]})})]},f))})]})}function dr(n){const r=new Date(n);function a(i){return i.toString().padStart(2,"0")}const s=r.getFullYear(),t=a(r.getMonth()+1),o=a(r.getDate());return`${s}-${t}-${o}`}function ur(n){const r=new Date(n);function a(o){return o.toString().padStart(2,"0")}const s=a(r.getHours()),t=a(r.getMinutes());return`${s}:${t}`}const hr={display:"flex",alignItems:"center",justifyContent:"center"},xr={backgroundColor:"#5C6B73",boxShadow:"0 3px 5px 2px rgba(0, 0, 0, .3)",padding:"20px",color:"#ffffff",textAlign:"center",fontSize:"1.5rem"},fr={marginTop:"20px",display:"flex",justifyContent:"space-around"};function mr({handleCloseModal:n,pathway:r,procedureToDeleteId:a,removeProcedureFromPathway:s}){const t=()=>{W.deleteById(a).then(()=>{s(a)}).catch(u=>console.log(u));const i=r.procedures.filter(u=>u!==a),c={name:r.name,patient:r.patient,status:r.status,is_template:r.is_template,procedures:i};Q.updateById(r._id,c),n()};let o=e.jsxs("h2",{id:"confirmation-modal-title",children:["Delete the Procedure from ",r.name]});return e.jsx($,{open:!0,style:hr,"aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-description",children:e.jsx(p,{sx:xr,children:e.jsxs("div",{children:[o,e.jsxs("div",{style:fr,children:[e.jsx(w,{onClick:t,variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Confirm"}),e.jsx(w,{onClick:n,variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Cancel"})]})]})})})}const K=ne("/users"),pr={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},he={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2};function gr({pathway:n,handleClose:r,addProcedureToPathway:a}){const[s,t]=l.useState(""),[o,i]=l.useState([""]),[c,u]=l.useState(""),[d,f]=l.useState(""),[b,h]=l.useState(""),[m,M]=l.useState(""),[S,y]=l.useState([]),[v,k]=l.useState({procedureName:"",caregivers:"",location:"",startTime:"",endTime:"",details:""});l.useEffect(()=>{K.getAll().then(I=>y(I.data))},[]);const T=(I,A)=>{const g=[...o];g[I]=A.target.value,i(g)},B=()=>{i([...o,""])},q=I=>{const A=[...o];A.splice(I,1),i(A)},U=()=>{if(!N())return;const I=JSON.parse(localStorage.getItem("profile")||"{}"),A=[];for(let j of S)o.includes(j.name)&&A.push(j._id);const g={posterId:I._id,name:s,caregiver:A,location:c,start:new Date(d),end:new Date(b),details:m,patient:n.patient,status:"waiting"};W.create(g).then(j=>{a(j.data._id);const C={...n,procedures:[...n.procedures,j.data._id]};if(g.caregiver&&g.caregiver.length>0){console.log(g.caregiver);for(const P of g.caregiver)Y.emit("notification",{receiverId:P,content:m})}Q.updateById(n._id,C).then(P=>console.log(P.data)).catch(P=>console.log(P))}).catch(j=>console.log(j)),r()},N=()=>{let I=!0,A={procedureName:"",caregivers:"",location:"",startTime:"",endTime:"",details:""};return s.trim()||(A.procedureName="Procedure name is required.",I=!1),(o.length===0||o.every(g=>!g.trim()))&&(A.caregivers="At least one caregiver is required.",I=!1),c.trim()||(A.location="Location is required.",I=!1),d.trim()||(A.startTime="Start time is required.",I=!1),b.trim()?new Date(d)>=new Date(b)&&(A.endTime="End time must be later than start time.",I=!1):(A.endTime="End time is required.",I=!1),m.trim()||(A.details="Details are required.",I=!1),k(A),I};return e.jsx("div",{children:e.jsx($,{open:!0,onClose:r,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:pr,children:[e.jsx(D,{id:"procedure-modal-title",variant:"h6",component:"h2",color:"common.white",children:"Procedure Information"}),e.jsx(E,{required:!0,id:"procedure-name",label:"Procedure Name",value:s,onChange:I=>t(I.target.value),error:!!v.procedureName,helperText:v.procedureName,sx:he}),o.map((I,A)=>e.jsxs(p,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(E,{required:!0,label:"Caregiver",value:I,onChange:g=>T(A,g),error:!!v.caregivers&&A===0,helperText:A===0?v.caregivers:"",sx:{...he,flex:1}}),e.jsx(w,{onClick:()=>q(A),sx:{mx:1},children:"Remove"})]},A)),e.jsx(w,{onClick:B,sx:{my:2},children:"Add Caregiver"}),e.jsx(E,{required:!0,id:"location",label:"Location",value:c,onChange:I=>{u(I.target.value),k(A=>({...A,location:""}))},error:!!v.location,helperText:v.location,sx:he}),e.jsx(E,{required:!0,id:"start-time",label:"Start Time",type:"datetime-local",value:d,onChange:I=>{f(I.target.value),k(A=>({...A,startTime:"",endTime:""}))},error:!!v.startTime,helperText:v.startTime,InputLabelProps:{shrink:!0},sx:he}),e.jsx(E,{required:!0,id:"end-time",label:"End Time",type:"datetime-local",value:b,onChange:I=>{h(I.target.value),k(A=>({...A,endTime:""}))},error:!!v.endTime,helperText:v.endTime,InputLabelProps:{shrink:!0},sx:he}),e.jsx(E,{id:"procedure-detail",label:"Procedure Detail",value:m,onChange:I=>{M(I.target.value),k(A=>({...A,details:""}))},error:!!v.details,helperText:v.details,multiline:!0,rows:4,sx:he}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:U,children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:r,children:"Cancel"})]})]})})})}function jr({inEdit:n,pathway:r,handleEditClick:a,handleSaveClick:s,handleAddProcedure:t,handleDeletePathway:o,handlePublishPathway:i,handleEndPathway:c}){var m,M;const[u,d]=l.useState([]);l.useEffect(()=>{W.getAll().then(S=>d(S.data)).catch(S=>console.log(S))},[r.procedures]);const f=[];for(let S of u)(m=r.procedures)!=null&&m.includes(S._id)&&f.push(S);const b=r.status!=="unpublished";let h=!1;((M=r.procedures)==null?void 0:M.length)===0&&(h=!0),r.status==="unpublished"&&(h=!0),r.status==="completed"&&(h=!0);for(let S of f)S.status!=="completed"&&(h=!0);return n?e.jsxs(p,{display:"flex",justifyContent:"space-between",padding:2,children:[e.jsx(w,{variant:"contained",color:"primary",onClick:t,children:"Add Procedure"}),e.jsx(p,{sx:{display:"flex",gap:1},children:e.jsx(w,{variant:"contained",onClick:s,children:"Save Changes"})})]}):e.jsxs(p,{display:"flex",justifyContent:"space-between",padding:2,children:[e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(w,{variant:"contained",color:"primary",onClick:a,children:"Edit"}),e.jsx(w,{variant:"contained",color:"primary",disabled:b,onClick:i,children:"publish"})]}),e.jsxs(p,{sx:{display:"flex",gap:1},children:[e.jsx(w,{variant:"contained",onClick:o,children:"Delete Pathway"}),e.jsx(w,{variant:"contained",disabled:h,onClick:c,children:"End Pathway"})]})]})}const br={display:"flex",alignItems:"center",justifyContent:"center"},yr={backgroundColor:"#5C6B73",boxShadow:"0 3px 5px 2px rgba(0, 0, 0, .3)",padding:"20px",color:"#ffffff",textAlign:"center",fontSize:"1.5rem"},Cr={marginTop:"20px",display:"flex",justifyContent:"space-around"};function wr({handleConfirm:n,handleCancel:r,pathwayId:a}){let s=e.jsx("h2",{id:"confirmation-modal-title",children:"Do you want to Delete this Pathway?"});return e.jsx($,{open:!0,style:br,"aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-description",children:e.jsx(p,{sx:yr,children:e.jsxs("div",{children:[s,e.jsxs("div",{style:Cr,children:[e.jsx(w,{onClick:()=>n(a),variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Confirm"}),e.jsx(w,{onClick:r,variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Cancel"})]})]})})})}const vr={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},xe={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2};function Sr({modalOpen:n,handleClose:r,procedureToEditId:a,pathway:s,refetchProcedures:t}){const[o,i]=l.useState(""),[c,u]=l.useState([]),[d,f]=l.useState(""),[b,h]=l.useState(""),[m,M]=l.useState(""),[S,y]=l.useState(""),[v,k]=l.useState([]),[T,B]=l.useState({procedureName:"",caregivers:"",location:"",startTime:"",endTime:"",details:""});l.useEffect(()=>{K.getAll().then(g=>k(g.data))},[]),l.useEffect(()=>{W.getById(a).then(({data:g})=>{var C,P;i(g.name||""),f(g.location||"");const j=g.caregiver;j&&j.length>0?(u([]),j.forEach(z=>{K.getById(z).then(({data:_})=>{u(Re=>[...Re,_.name])}).catch(_=>console.log(_))})):u([]),h(Je((C=g.start)==null?void 0:C.toString())||""),M(Je((P=g.end)==null?void 0:P.toString())||""),y(g.details||"")}).catch(g=>console.log(g))},[a]);const q=(g,j)=>{const C=[...c];C[g]=j.target.value,u(C)},U=()=>{u([...c,""])},N=g=>{const j=[...c];j.splice(g,1),u(j)},I=()=>{if(!A())return;const g=[];for(let C of v)c.includes(C.name)&&g.push(C._id);console.log(g);const j={name:o,caregiver:g,location:d,start:new Date(b),end:new Date(m),details:S,patient:s.patient,status:"waiting"};W.updateById(a,j).then(()=>t()).catch(C=>console.log(C)),r()},A=()=>{let g=!0,j={procedureName:"",caregivers:"",location:"",startTime:"",endTime:"",details:""};return o.trim()||(j.procedureName="Procedure name is required.",g=!1),(c.length===0||c.every(C=>!C.trim()))&&(j.caregivers="At least one caregiver is required.",g=!1),d.trim()||(j.location="Location is required.",g=!1),b.trim()||(j.startTime="Start time is required.",g=!1),m.trim()?new Date(b)>=new Date(m)&&(j.endTime="End time must be later than start time.",g=!1):(j.endTime="End time is required.",g=!1),S.trim()||(j.details="Details are required.",g=!1),B(j),g};return e.jsx("div",{children:e.jsx($,{open:n,onClose:r,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:vr,children:[e.jsx(D,{id:"procedure-modal-title",variant:"h6",component:"h2",color:"common.white",children:"Procedure Information"}),e.jsx(E,{required:!0,id:"procedure-name",label:"Procedure Name",value:o,onChange:g=>{i(g.target.value),B(j=>({...j,procedureName:""}))},error:!!T.procedureName,helperText:T.procedureName,sx:xe}),c.map((g,j)=>e.jsxs(p,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(E,{required:!0,label:"Caregiver",value:g,onChange:C=>{q(j,C),B(P=>({...P,caregivers:""}))},error:!!T.caregivers&&j===0,helperText:j===0?T.caregivers:"",sx:{...xe,flex:1}}),e.jsx(w,{onClick:()=>N(j),sx:{mx:1},children:"Remove"})]},j)),e.jsx(w,{onClick:U,sx:{my:2},children:"Add Caregiver"}),e.jsx(E,{required:!0,id:"location",label:"Location",value:d,onChange:g=>{f(g.target.value),B(j=>({...j,location:""}))},error:!!T.location,helperText:T.location,sx:xe}),e.jsx(E,{required:!0,id:"start-time",label:"Start Time",type:"datetime-local",value:b,onChange:g=>{h(g.target.value),B(j=>({...j,startTime:"",endTime:""}))},error:!!T.startTime,helperText:T.startTime,InputLabelProps:{shrink:!0},sx:xe}),e.jsx(E,{required:!0,id:"end-time",label:"End Time",type:"datetime-local",value:m,onChange:g=>{M(g.target.value),B(j=>({...j,endTime:""}))},error:!!T.endTime,helperText:T.endTime,InputLabelProps:{shrink:!0},sx:xe}),e.jsx(E,{id:"procedure-detail",label:"Procedure Detail",value:S,onChange:g=>{y(g.target.value),B(j=>({...j,details:""}))},error:!!T.details,helperText:T.details,multiline:!0,rows:4,sx:xe}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:I,children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:r,children:"Cancel"})]})]})})})}function Je(n){const r=new Date(n);function a(u){return u.toString().padStart(2,"0")}const s=r.getFullYear(),t=a(r.getMonth()+1),o=a(r.getDate()),i=a(r.getHours()),c=a(r.getMinutes());return`${s}-${t}-${o}T${i}:${c}`}function kr(){const[n,r]=l.useState(!1),[a,s]=l.useState(!1),[t,o]=l.useState(!1),[i,c]=l.useState(!1),[u,d]=l.useState(!1),[f,b]=l.useState(""),[h,m]=l.useState(""),{id:M}=Fe(),[S,y]=l.useState({}),[v,k]=l.useState(!1),T=H(),B=()=>{k(C=>!C)};l.useEffect(()=>{Q.getById(M).then(C=>y(C.data)).catch(C=>console.log(C))},[]);const q=C=>{Q.deleteById(C).then(P=>console.log(P.data)).catch(P=>console.log(P));for(let P of S.procedures)W.deleteById(P).then(z=>console.log(z.data)).catch(z=>console.log(z));T("/manager-pathway")},U=C=>{b(C),d(!0)},N=C=>{m(C),s(!0)},I=C=>{const P=[...S.procedures,C],z={...S,procedures:P};y(z)},A=C=>{const P=S.procedures.filter(_=>_!==C),z={...S,procedures:P};y(z)},g=()=>{const C={...S,status:"waiting"};Q.updateById(S._id,C).then(({data:P})=>{y(P)}).catch(P=>console.log(P))},j=()=>{const C={...S,status:"completed"};Q.updateById(S._id,C).then(({data:P})=>{y(P)}).catch(P=>console.log(P))};return e.jsx(G,{id:"app",children:e.jsxs(p,{sx:{flexGrow:1,mt:8},children:[e.jsx(ae,{cred:!0}),e.jsx(Se,{}),e.jsx(ir,{pathway:S}),e.jsx(cr,{pathway:S,inEdit:n,handleDeleteProcedure:N,handleEditProcedure:U,refetchToggle:v}),e.jsx(jr,{inEdit:n,pathway:S,handleEditClick:()=>r(!0),handleSaveClick:()=>r(!1),handleAddProcedure:()=>o(!0),handleDeletePathway:()=>c(!0),handlePublishPathway:g,handleEndPathway:j}),e.jsx(Sr,{modalOpen:u,procedureToEditId:f,handleClose:()=>d(!1),pathway:S,refetchProcedures:B}),a&&e.jsx(mr,{handleCloseModal:()=>s(!1),pathway:S,procedureToDeleteId:h,removeProcedureFromPathway:A}),t&&e.jsx(gr,{pathway:S,handleClose:()=>o(!1),addProcedureToPathway:I}),i&&e.jsx(wr,{handleConfirm:q,handleCancel:()=>c(!1),pathwayId:M})]})})}function Pr({onclose:n,handleResetPassword:r,user:a}){const[s,t]=l.useState(""),[o,i]=l.useState(""),[c,u]=l.useState(""),d=async()=>{if(o===""||c===""){t("Please fill in all fields");return}o!==c?t("Passwords do not match"):(console.log("Passwords match -> Process to change password for user ",a.name),t(""),r(o),n())},f={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},b={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2};return e.jsx("div",{children:e.jsx($,{open:!0,"aria-labelledby":"create-user-modal-title",children:e.jsxs(p,{sx:f,children:[e.jsx(D,{id:"reset-password-modal-title",variant:"h4",component:"h2",color:"common.white",gutterBottom:!0,children:"Reset Password"}),e.jsxs(D,{id:"confirmation-modal-description",variant:"subtitle1",component:"h4",color:"common.white",gutterBottom:!0,children:["Username: ",a.username,e.jsx("br",{}),"Name: ",a.name]}),e.jsx(E,{required:!0,id:"new-password",label:"New Password",sx:b,onChange:h=>i(h.target.value),...s&&{error:!0}}),e.jsx(E,{required:!0,id:"confirm-password",label:"Confirm Password",sx:b,onChange:h=>u(h.target.value),...s&&{error:!0}}),s&&e.jsx(p,{textAlign:"center",children:e.jsx(D,{variant:"subtitle1",component:"h4",color:"error",children:s})}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:d,children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:n,children:"Cancel"})]})]})})})}const Ir={display:"flex",alignItems:"center",justifyContent:"center"},Tr={backgroundColor:"#5C6B73",boxShadow:"0 3px 5px 2px rgba(0, 0, 0, .3)",padding:5,color:"#ffffff",textAlign:"center",fontSize:"1.5rem"},Mr={marginTop:"20px",display:"flex",justifyContent:"space-around"};function Er({open:n,onClose:r,onConfirm:a,user:s}){let o=e.jsx(D,{variant:"h4",component:"h2",id:"confirmation-modal-title",children:"Click confirm to Delete the user"}),i=e.jsxs(p,{id:"confirmation-modal-description",sx:{p:2},children:[e.jsxs(D,{variant:"h6",component:"h4",children:["Name: ",s.name]}),e.jsxs(D,{variant:"h6",component:"h4",children:["Role: ",s.role]})]});return e.jsx($,{open:n,style:Ir,"aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-description",children:e.jsx(p,{sx:Tr,children:e.jsxs("div",{children:[o,i,e.jsxs("div",{style:Mr,children:[e.jsx(w,{onClick:a,variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Confirm"}),e.jsx(w,{onClick:r,variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Cancel"})]})]})})})}function Br({searchInput:n}){const[r,a]=l.useState(!1),[s,t]=l.useState(!1),[o,i]=l.useState([]),[c,u]=l.useState([]),[d,f]=l.useState({id:"",name:"",role:"",username:""}),b=()=>{const v=c.filter(k=>k.name.toLowerCase().includes(n.toLowerCase())||k.username.toLowerCase().includes(n.toLowerCase())||k.email.toLowerCase().includes(n.toLowerCase())||k.phone_number.includes(n)||k.role.toLowerCase().includes(n.toLowerCase()));v&&i(v)},h=()=>{a(!1)},m=()=>{K.deleteById(d.id).then(v=>{const k=v.data;console.log(`delete user ${k.name} success`),t(!1),b()}).catch(v=>{console.log(v)})},M=()=>{t(!0)},S=v=>{console.log(d),K.updateById(d.id,{password:v}).then(()=>{console.log("Password reset success!"),b()}).catch(k=>{console.log(k)})};l.useEffect(()=>{K.getAll().then(v=>{u(v.data),b()}).catch(v=>console.log(v))},[c]);const y={fontWeight:"bold",backgroundColor:"#E3E3E4"};return e.jsxs(p,{children:[e.jsx(re,{component:F,sx:{width:"100%",border:"solid 0.1em grey",shadow:"inherit"},children:e.jsxs(te,{"aria-label":"simple table",stickyHeader:!0,sx:{width:"100%"},children:[e.jsx(oe,{sx:{cursor:"default"},children:e.jsxs(O,{children:[e.jsx(x,{align:"left",sx:y,children:e.jsx(L,{active:!0,children:"ID"})}),e.jsx(x,{align:"left",sx:y,children:e.jsx(L,{active:!0,children:"Name"})}),e.jsx(x,{align:"left",sx:y,children:e.jsx(L,{active:!0,children:"Username"})}),e.jsx(x,{align:"center",sx:y,children:e.jsx(L,{active:!0,children:"Email"})}),e.jsx(x,{align:"left",sx:y,children:e.jsx(L,{active:!0,children:"Phone Number"})}),e.jsx(x,{align:"left",sx:y,children:e.jsx(L,{active:!0,children:"Role"})}),e.jsx(x,{align:"center",sx:y,width:"25%",children:"Actions"})]})}),e.jsx(J,{sx:{cursor:"default"},children:o.map((v,k)=>{var T,B;return e.jsxs(O,{sx:{"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"#f5f5f5"}},children:[e.jsxs(x,{scope:"row",children:[(T=v._id)==null?void 0:T.substring(0,10),(B=v._id)!=null&&B.length&&v._id.length>10?"...":""]}),e.jsxs(x,{align:"left",children:[v.name.substring(0,10),v.name.length>10?"...":""]}),e.jsxs(x,{align:"left",children:[v.username.substring(0,15),v.username.length>15?"...":""]}),e.jsxs(x,{align:"center",children:[v.email.substring(0,20),v.email.length>20?"...":""]}),e.jsxs(x,{align:"left",children:[v.phone_number.substring(0,10),v.phone_number.length>10?"...":""]}),e.jsx(x,{align:"left",children:v.role}),e.jsxs(x,{align:"right",size:"medium",children:[e.jsx(w,{variant:"outlined",size:"small",sx:{fontSize:"11px",padding:"7px 14px",":hover":{backgroundColor:"#e0e0e0",fontWeight:"bold"}},onClick:()=>{var q;f({id:((q=v._id)==null?void 0:q.toString())||"",name:v.name,username:v.username,role:v.role}),a(!0)},children:"Change Password"}),e.jsx(ee,{size:"large",sx:{ml:3,":hover":{color:Ct[500]}},onClick:()=>{var q;f({id:((q=v._id)==null?void 0:q.toString())||"",name:v.name,username:v.username,role:v.role}),M()},children:e.jsx(Me,{})})]})]},k)})})]})}),e.jsx(Er,{open:s,onClose:()=>t(!s),onConfirm:m,user:{name:d.name,role:d.role}}),r&&e.jsx(Pr,{onclose:h,handleResetPassword:v=>S(v),user:{name:d.name,username:d.username}})]})}function Dr({onSearch:n}){const[r,a]=Z.useState(null),[s,t]=Z.useState(""),o=!!r,i=d=>{a(d.currentTarget)},c=()=>{a(null)},u=d=>{d.preventDefault(),n(s)};return l.useEffect(()=>{n(s)},[s]),e.jsx(p,{sx:{display:"flex",alignItems:"left",border:"1px solid",borderRadius:1},children:e.jsxs(F,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%"},onSubmit:u,children:[e.jsx(p,{sx:{p:1},children:e.jsx(Ee,{})}),e.jsx(ve,{sx:{ml:1,flex:1,fontSize:"15px"},placeholder:"Search",inputProps:{"aria-label":"Search"},onChange:d=>{t(d.target.value)}}),e.jsx(ue,{sx:{height:28,m:.5},orientation:"vertical"}),e.jsx(w,{color:"primary",sx:{p:"10px","&:hover":{backgroundColor:"#e0e0e0"}},"aria-label":"Search_by",endIcon:e.jsx(Be,{}),onClick:i,children:"Search By"}),e.jsxs(we,{anchorEl:r,id:"search_user_by",open:o,onClose:c,onClick:c,children:[e.jsx(R,{children:"Caregiver"}),e.jsx(R,{children:"Manager"}),e.jsx(R,{children:"All"})]})]})})}function Ar({showModal:n}){const[r,a]=l.useState(""),s=t=>{console.log("Search Accounts:",t),a(t)};return e.jsxs(p,{sx:{flexGrow:1,pt:3,pr:1,pb:3,marginTop:8,width:"100%",overflowX:"auto"},children:[e.jsx(D,{variant:"h5",gutterBottom:!0,children:"Users Dashboard"}),e.jsx(p,{display:"flex",sx:{mb:3,mt:3},children:e.jsxs(me,{container:!0,spacing:2,sx:{alignItems:"center"},children:[e.jsx(me,{item:!0,xs:12,sm:8,md:9,lg:10,sx:{pr:1},children:e.jsx(Dr,{onSearch:t=>{s(t)}})}),e.jsx(me,{item:!0,xs:12,sm:4,md:3,lg:2,children:e.jsx(p,{sx:{display:"flex",justifyContent:"start"},children:e.jsxs(Ze,{variant:"extended",size:"small",color:"primary",sx:{fontSize:"12px",borderRadius:1,height:"45px"},onClick:n,children:[e.jsx(et,{fontSize:"small"}),"Create User"]})})})]})}),e.jsx(Br,{searchInput:r})]})}function Nr({onclose:n}){var b,h,m,M,S;const[r,a]=l.useState(""),s=H(),{register:t,handleSubmit:o,reset:i,formState:{errors:c}}=$e(),u=o(y=>{i(),console.log(y);let v={name:y.fullName,username:y.username,password:y.password,email:y.email,phone_number:y.phoneNumber,role:y.role};K.create(v).then(()=>console.log("User created")).catch(k=>console.log(k)),n(),s("/accounts")}),d={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},f={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2};return e.jsx("div",{children:e.jsx($,{open:!0,"aria-labelledby":"create-user-modal-title",children:e.jsxs(p,{sx:d,children:[e.jsx(D,{id:"create-user-modal-title",variant:"h6",component:"h2",color:"common.white",children:"Create New User"}),e.jsx(E,{required:!0,id:"full-name",label:"Full Name",sx:f,...t("fullName",{required:"Full Name is required"}),error:!!c.fullName,helperText:(b=c.fullName)==null?void 0:b.message}),e.jsx(E,{required:!0,id:"username",label:"Username",sx:f,...t("username",{required:"Username is required"}),error:!!c.username,helperText:(h=c.username)==null?void 0:h.message}),e.jsx(E,{required:!0,id:"phone-number",label:"Phone Number",sx:f,...t("phoneNumber",{required:"Phone Number is required"}),error:!!c.phoneNumber,helperText:(m=c.phoneNumber)==null?void 0:m.message}),e.jsx(E,{required:!0,id:"email",label:"Email",sx:f,...t("email",{required:"Email is required"}),error:!!c.email,helperText:(M=c.email)==null?void 0:M.message}),e.jsx(E,{required:!0,id:"password",label:"Password",sx:f,...t("password",{required:"Password is required"}),error:!!c.password,helperText:(S=c.password)==null?void 0:S.message}),e.jsxs(ge,{fullWidth:!0,sx:{...f,mt:3},error:!!c.role,children:[e.jsx(je,{id:"user-role-label",children:"Role"}),e.jsxs(be,{labelId:"user-role-label",id:"user-role-select",value:r,label:"Role",...t("role",{required:"Role is required"}),onChange:y=>a(y.target.value),sx:{color:"white","& .MuiSvgIcon-root":{color:"white"}},children:[e.jsx(R,{value:"caregiver",children:"Caregiver"}),e.jsx(R,{value:"manager",children:"Manager"})]}),c.role&&e.jsx(wt,{style:{color:"red"},children:c.role.message})]}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:u,children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:n,children:"Cancel"})]})]})})})}const Rr=240;function nt(){const n=[{icon:e.jsx(vt,{}),name:"Accounts",path:"/accounts"},{icon:e.jsx(De,{}),name:"Message",path:"/Messages/admin"}],r=H(),a=s=>{r(s)};return e.jsxs(p,{children:[e.jsxs(ye,{sx:{flexShrink:0,"& .MuiDrawer-paper":{width:Rr,boxSizing:"border-box"},display:{xs:"none",s:"none",md:"none",lg:"block",xl:"block"}},variant:"permanent",anchor:"left",children:[e.jsx(de,{}),e.jsx(le,{children:n.map(({icon:s,name:t,path:o},i)=>e.jsx(X,{disablePadding:!0,children:e.jsxs(Ce,{onClick:()=>a(o),sx:{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"inherit","&:hover":{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"#f4f4f4"},borderRight:location.pathname===o||location.pathname.includes(o)?"5px solid #2196f3":"none"},children:[e.jsx(ie,{sx:{"& .MuiSvgIcon-root":{fontSize:"2rem"}},children:s}),e.jsx(ce,{primary:t})]})},i))})]}),e.jsxs(ye,{open:!0,sx:{flexShrink:0,display:{lg:"none",xl:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:"100px"}},variant:"persistent",anchor:"left",children:[e.jsx(de,{}),e.jsx(le,{children:n.map(({icon:s,name:t,path:o},i)=>e.jsx(X,{disablePadding:!0,children:e.jsx(Ce,{onClick:()=>a(o),sx:{justifyContent:"center",pl:"auto",backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"inherit","&:hover":{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"#f4f4f4"},borderRight:location.pathname===o||location.pathname.includes(o)?"5px solid #2196f3":"none"},children:e.jsx(ie,{sx:{minWidth:"auto","& .MuiSvgIcon-root":{fontSize:"2rem"}},id:t,children:s})})},i))})]})]})}function qr(){const[n,r]=l.useState(!1),a=()=>{r(!0)},s=()=>{r(!1)};return e.jsxs(G,{id:"accountScreen",sx:{display:"flex",flexDirection:"column",alignContent:"center"},children:[e.jsx(ae,{cred:!0}),e.jsx(nt,{}),e.jsx(p,{component:"main",ml:{xs:"20vw",sm:"20vw",md:"20vw",lg:"12vw",xl:"2vw"},width:"75vw",children:e.jsx(Ar,{showModal:a})}),n&&e.jsx(Nr,{onclose:s})]})}function _r(n){const{query:r,setQuery:a,contacts:s=[],current:t,setCurrent:o}=n,[i,c]=tt(),u=d=>{c({id:d}),o(d)};return e.jsx(F,{variant:"outlined",sx:{width:"fit-content",flexShrink:0,overflow:"auto",pt:0,pr:1,pl:1,height:"80vh",border:"0.5px solid #989A9D",borderTopRightRadius:"0",borderBottomRightRadius:"0"},children:e.jsx(p,{sx:{overflow:"auto"},children:e.jsxs(le,{children:[e.jsx(X,{children:e.jsx(ce,{primary:e.jsx(D,{variant:"h5",fontWeight:"bolder",children:"Messaging"})})}),e.jsx(X,{children:e.jsx(E,{value:r.name,onChange:d=>a({name:d.target.value}),size:"small",placeholder:"Find or start a conversation",fullWidth:!0})}),s==null?void 0:s.map(d=>e.jsxs(X,{sx:{borderBottom:"0.5px solid #989A9D",cursor:"pointer",background:t===d.id?"#42a5f5":"","&:hover":{backgroundColor:t===d.id?"#42a5f5":"#f5f5f5"}},onClick:()=>u(d.id),children:[e.jsx(St,{children:e.jsx(Oe,{src:d.avatar,children:d.name[0].toUpperCase()})}),e.jsx(ce,{primary:d.name.length>15?d.name.substring(0,15)+"...":d.name,secondary:d.lastMessage})]},d.id))]})})})}function Lr({message:n,date:r,self:a}){return e.jsxs(F,{sx:{p:1.5,maxWidth:"70%",bgcolor:a?"background.paper":"primary.light",alignSelf:a?"end":"start",boxShadow:3},variant:"outlined",children:[e.jsx(p,{sx:{pb:2},children:e.jsx(D,{variant:"body2",children:n})}),e.jsx(p,{children:e.jsx(D,{variant:"caption",display:"block",sx:{textAlign:"right",pt:1,fontSize:10,color:"black"},children:r})})]})}const Or=JSON.parse(localStorage.getItem("profile")||"{}");function Fr(n){const r=new Date,a=new Date(n),s=Math.floor((Number(r)-Number(a))/(1e3*60*60*24));return s===0?`Today ${a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:s===1?`Yesterday ${a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:a.toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function $r(n){const{current:r,message:a,setMessage:s,onMessageSend:t,messages:o,scrollRef:i,loading:c}=n,[u,d]=l.useState(),f=o.map(h=>({...h,self:Or._id===h.poster})),b=async()=>{const{data:h}=await K.getById(r);h.id&&d(h)};return l.useEffect(()=>{r&&b()},[r]),l.useEffect(()=>{i&&i.current&&(i.current.scrollTop=i.current.scrollHeight)},[JSON.stringify(o)]),e.jsxs(e.Fragment,{children:[!r&&e.jsxs(p,{sx:{width:"100%",height:"80vh",background:"#f5f5f5",pl:1.5,pr:1.5,backgroundColor:"#E3E3E4",borderTopRightRadius:"5px",borderBottomRightRadius:"5px",border:"0.5px solid #989A9D",borderLeft:"none",alignContent:"center",justifyContent:"center",display:"flex",alignItems:"center",flexDirection:"column"},children:[e.jsx(De,{sx:{fontSize:80,color:"#989A9D"}}),e.jsx(D,{variant:"h4",sx:{ml:2,color:"#989A9D"},children:"Messaging..."}),e.jsx(D,{variant:"h6",sx:{ml:2,color:"#989A9D"},children:"Select a user to start messaging"})]}),r&&e.jsxs(p,{sx:{width:"100%",height:"80vh",background:"#f5f5f5",pl:1.5,pr:1.5,backgroundColor:"#E3E3E4",borderTopRightRadius:"5px",borderBottomRightRadius:"5px",border:"0.5px solid #989A9D",borderLeft:"none",alignContent:"space-around",mx:1},children:[e.jsxs(F,{ref:i,elevation:3,sx:{overflowY:"scroll",overflowX:"hidden",pl:0,pr:2,pb:1,mb:2,flexShrink:0,height:"85%"},variant:"elevation",children:[e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:2,position:"sticky",p:1.5,background:"white",top:0,zIndex:1,borderBottom:"1px solid #f5f5f5",width:"120%",flexDirection:"column",boxShadow:1},children:[e.jsx(p,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:e.jsxs(p,{display:"flex",alignItems:"center",children:[e.jsx(Oe,{sx:{mr:3},variant:"rounded",children:u==null?void 0:u.name[0].toUpperCase()}),e.jsx(D,{variant:"h6",children:u==null?void 0:u.name})]})}),e.jsx(ue,{})]}),e.jsx(p,{sx:{display:"flex",flexDirection:"column",gap:2,mt:2,p:1,pl:2,overflow:"auto"},children:f.map(h=>e.jsx(Lr,{message:h.content,date:Fr(h.time),self:h.self},h._id))})]}),e.jsxs(p,{component:"form",sx:{display:"flex",alignItems:"center",mb:1,px:2,py:1,borderRadius:1,height:30,background:"white",boxShadow:2},children:[e.jsx(ve,{onChange:h=>s(h.target.value),value:a,sx:{ml:1,flex:1},placeholder:"Type your message",inputProps:{"aria-label":"type your message"}}),c?e.jsx(kt,{size:20}):e.jsx(ee,{sx:{p:"10px"},"aria-label":"send",onClick:t,children:e.jsx(Pt,{})})]})]})]})}const _e=ne("/users/chatroom");function Wr(){const[n,r]=l.useState(!1),a=l.useRef(null),[s,t]=l.useState(Y.connected),[o,i]=l.useState(),[c,u]=l.useState(""),[d,f]=l.useState({}),[b,h]=l.useState(""),[m,M]=l.useState(""),[S,y]=l.useState([]),[v]=tt(),k=We(),T=async()=>{const N=JSON.parse(localStorage.getItem("profile")||"{}"),{data:I}=await _e.create({users:[N._id,c].sort()});Y.emit("create or join",I,N._id),M(I)},B=async N=>{const I=JSON.parse(localStorage.getItem("profile")||"{}"),{data:A=[]}=await K.getAll(N);i(A.filter(g=>g._id!==I._id))},q=async N=>{if(N){const{data:I=[]}=await _e.getById(N);y(I)}},U=async()=>{const N=JSON.parse(localStorage.getItem("profile")||"{}");if(b&&m&&!n){r(!0);const{data:I}=await _e.updateById(m,{poster:N._id,content:b});I&&(Y.emit("chat",m,N._id,{receiverId:c,content:b}),Y.once("chat",()=>{h(""),r(!1)}))}};return l.useEffect(()=>{B(d)},[JSON.stringify(d)]),l.useEffect(()=>{c&&T()},[c]),l.useEffect(()=>{function N(){t(!0)}function I(){t(!1)}async function A(g){q(g)}return Y.on("connect",N),Y.on("disconnect",I),Y.on("chat",A),()=>{Y.off("connect",N),Y.off("disconnect",I),Y.off("chat",A)}},[]),l.useEffect(()=>{q(m)},[m]),l.useEffect(()=>{const N=v.get("id");N!==c&&u(N)},[c,k.search]),e.jsxs(G,{sx:{display:"flex",flexDirection:"row",flexShrink:3,pt:3,pr:1,pb:3,pl:0,height:"fit-content"},children:[e.jsx(_r,{contacts:o,current:c,setCurrent:u,query:d,setQuery:f}),e.jsx($r,{loading:n,scrollRef:a,messages:S,current:c,message:b,setMessage:h,onMessageSend:U})]})}const Ur=240;function ze(){const n=[{icon:e.jsx(It,{}),name:"Schedule",path:"/schedule"},{icon:e.jsx(De,{}),name:"Message",path:"/Messages/caregiver"}],r=H(),a=s=>{r(s)};return e.jsxs(p,{children:[e.jsxs(ye,{sx:{flexShrink:0,"& .MuiDrawer-paper":{width:Ur,boxSizing:"border-box",display:{xs:"none",s:"none",md:"none",lg:"block",xl:"block"}}},variant:"permanent",anchor:"left",children:[e.jsx(de,{}),e.jsx(le,{children:n.map(({icon:s,name:t,path:o},i)=>e.jsx(X,{disablePadding:!0,children:e.jsxs(Ce,{onClick:()=>a(o),sx:{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"inherit","&:hover":{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"#f4f4f4"},borderRight:location.pathname===o||location.pathname.includes(o)?"5px solid #2196f3":"none"},children:[e.jsx(ie,{sx:{"& .MuiSvgIcon-root":{fontSize:"2rem"}},children:s}),e.jsx(ce,{primary:t})]})},i))})]}),e.jsxs(ye,{open:!0,sx:{flexShrink:0,display:{lg:"none",xl:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:"100px"}},variant:"persistent",anchor:"left",children:[e.jsx(de,{}),e.jsx(le,{children:n.map(({icon:s,name:t,path:o},i)=>e.jsx(X,{disablePadding:!0,children:e.jsx(Ce,{onClick:()=>a(o),sx:{justifyContent:"center",pl:"auto",backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"inherit","&:hover":{backgroundColor:location.pathname===o||location.pathname.includes(o)?"#cfe8fc":"#f4f4f4"},borderRight:location.pathname===o||location.pathname.includes(o)?"5px solid #2196f3":"none"},children:e.jsx(ie,{sx:{minWidth:"auto","& .MuiSvgIcon-root":{fontSize:"2rem"}},id:t,children:s})})},i))})]})]})}function Le(){const r=We().pathname.split("/")[2],a=()=>r==="admin"?e.jsx(nt,{}):r==="manager"?e.jsx(Se,{}):r==="caregiver"?e.jsx(ze,{}):null;return e.jsxs(G,{sx:{display:"flex",flexDirection:"column",alignContent:"start",overflow:"scroll",width:"80vw",mt:"10vh",ml:"18vw",height:"inherit",background:"#f5f5f5"},children:[e.jsx(ae,{cred:!0}),a(),e.jsx(p,{component:"main",children:e.jsx(Wr,{})})]})}function zr({closeAlert:n}){var k,T;const{auth:r}=l.useContext(Ae),[a,s]=l.useState("");l.useEffect(()=>{var q;r!=null&&r.user&&(n(),M());const B=(q=r==null?void 0:r.user)==null?void 0:q.role;i(B==="admin"?"/accounts":B==="manager"?"/resources":B==="caregiver"?"/schedule":"/login")},[r==null?void 0:r.user]),l.useEffect(()=>{s(r==null?void 0:r.errorMsg)},[r==null?void 0:r.errorMsg]);const t={backgroundColor:"hsla(200,100%,50%,0.2);",color:"black",padding:"2em",border:"2px solid #A8A8A8",borderRadius:2,boxShadow:5,textAlign:"center",width:"fit-content"},o={backgroundColor:"#1976d2",":hover":{backgroundColor:"#0d47a1"},color:"white",border:"1px solid #A8A8A8",mt:3,mb:2},i=H(),[c,u]=l.useState(!1),d=()=>u(B=>!B),f=B=>{B.preventDefault()},b=()=>i("/forgetPassword"),{register:h,handleSubmit:m,reset:M,clearErrors:S,formState:{errors:y}}=$e(),v=m(B=>{r.loginUser(B.username,B.password)});return e.jsx(p,{sx:t,id:"login-modal",children:e.jsxs(G,{onSubmit:v,children:[e.jsx(D,{variant:"h3",gutterBottom:!0,component:"h1",sx:{mt:4},children:"CareFlow"}),a&&e.jsx(Ue,{severity:"error",children:a}),e.jsxs(p,{sx:{mt:2},component:"form",onSubmit:v,children:[e.jsx(E,{...h("username",{required:"Username is required"}),margin:"normal",fullWidth:!0,placeholder:"Username",id:"username",name:"username",InputProps:{startAdornment:e.jsx(rt,{sx:{mr:1,my:.5}})},error:!!y.username||!!a,helperText:(k=y.username)==null?void 0:k.message,onChange:()=>{S("username"),S("password")}}),e.jsx(E,{...h("password",{required:"Password is required"}),margin:"normal",fullWidth:!0,placeholder:"Password",name:"password",type:c?"text":"password",id:"password",autoComplete:"current-password",InputProps:{startAdornment:e.jsx(Tt,{sx:{mr:1,my:.5}}),endAdornment:e.jsx(Mt,{position:"end",children:e.jsx(ee,{"aria-label":"toggle password visibility",onClick:d,onMouseDown:f,edge:"end",children:c?e.jsx(Et,{}):e.jsx(Bt,{})})})},error:!!y.password||!!a,helperText:(T=y.password)==null?void 0:T.message,onChange:()=>{S("username"),S("password")}}),e.jsx(Dt,{onClick:b,variant:"body2",sx:{display:"block",textAlign:"center",mt:2,"&:hover":{cursor:"pointer",color:"#0d47a1",textDecoration:"underline"},textDecoration:"none"},children:"Forgot password?"}),e.jsx(w,{type:"submit",variant:"contained",color:"primary",sx:o,children:"Login"})]})]})})}function Hr(){const n=We(),[r,a]=l.useState(!1);l.useEffect(()=>{var t;(t=n.state)!=null&&t.resetRequested&&(a(!0),n.state.resetRequested=!1)},[n]);const s=()=>{a(!1)};return e.jsxs(G,{id:"loginScreen",sx:{display:"flex",flexDirection:"column",justifyContent:{xs:"center",md:"flex-start"},alignItems:"center",pt:{xs:2,sm:8,md:10,lg:20},minHeight:"100vh",width:"100%"},children:[e.jsx(Ne,{cred:!1}),e.jsxs(p,{display:"flex",flexDirection:"column",children:[e.jsx(zr,{closeAlert:s}),r&&e.jsx(Ue,{severity:"success",sx:{width:"inherit",mt:1,borderRadius:2,boxShadow:5,border:"solid 1.5px #8bc34a"},onClose:()=>{a(!1)},children:"Reset Password request is sent to the admin!"})]})]})}function Gr(){var b;const n={backgroundColor:"hsla(200,100%,50%,0.2);",color:"black",padding:"2em",border:"2px solid #A8A8A8",borderRadius:2,boxShadow:5,textAlign:"center",width:"fit-content"},r={backgroundColor:"#1976d2",":hover":{backgroundColor:"#0d47a1"},color:"white",border:"1px solid #A8A8A8",mt:1,width:"fit-content"},a=H(),[s,t]=l.useState(!1),o=()=>{a("/login")},{register:i,handleSubmit:c,reset:u,formState:{errors:d}}=$e(),f=c(h=>{console.log(h),u(),t(!0)});return e.jsx(p,{sx:n,id:"login-modal",children:e.jsxs(G,{children:[e.jsx(D,{variant:"h3",gutterBottom:!0,component:"h1",sx:{mt:4},children:"Forgot Password?"}),e.jsx(D,{variant:"h5",gutterBottom:!0,children:"Request for password reset"}),e.jsxs(p,{sx:{mt:1},component:"form",onSubmit:f,children:[s&&e.jsx(Ue,{severity:"error",children:"Username not found!"}),e.jsx(E,{...i("username",{required:"Username is required"}),margin:"normal",fullWidth:!0,placeholder:"Username",id:"username",name:"username",InputProps:{startAdornment:e.jsx(rt,{sx:{mr:1,my:.5}})},error:!!d.username,helperText:(b=d.username)==null?void 0:b.message}),e.jsxs(p,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",sx:{mt:1},children:[e.jsx(w,{color:"primary",sx:r,onClick:o,children:"Back"}),e.jsx(w,{type:"submit",sx:r,children:"Send Request"})]})]})]})})}function Jr(){return e.jsxs(G,{id:"forgetPasswordScreen",sx:{display:"flex",height:{xs:"100vh",sm:"100vh",md:"100%"},flexDirection:"column",justifyContent:{xs:"center",s:"space-evenly",md:"flex-start"},alignItems:"center",marginTop:{xs:"10%",s:"0"},paddingY:{s:0,md:10}},children:[e.jsx(Ne,{cred:!1}),e.jsx(Gr,{})]})}function Yr(){const[n,r]=l.useState([]),a=H();l.useEffect(()=>{async function o(){try{await W.getAll().then(i=>{r(i.data)})}catch(i){console.error("Error fetching data:",i)}}o()},[]);function s(o){let i;return o instanceof Date?i=o:i=new Date(o),i.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}function t(o){let i;return o instanceof Date?i=o:i=new Date(o),i.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!0})}return e.jsx(p,{sx:{flexGrow:1,p:3,marginLeft:"6em",marginTop:8,width:"100%",overflowX:"auto",minWidth:0,justifyContent:"center",alignItems:"center"},children:e.jsxs(F,{sx:{width:"95%",minHeight:"80vh",backgroundColor:"#9DB4C0",padding:2,margin:"auto",overflow:"auto"},children:[e.jsx(D,{variant:"h5",gutterBottom:!0,sx:{whiteSpace:"pre-line",backgroundColor:"#E0FBFC",padding:2},children:"Schedule"}),e.jsx(re,{component:F,children:e.jsx(te,{sx:{width:"100%"},"aria-label":"simple table",children:e.jsxs(J,{children:[e.jsxs(O,{children:[e.jsx(x,{align:"left",children:"Procedure"}),e.jsx(x,{align:"left",children:"Patient"}),e.jsx(x,{children:"Date"}),e.jsx(x,{align:"left",children:"Time"}),e.jsx(x,{align:"left",children:"Location"}),e.jsx(x,{align:"left",children:"Status"})]}),n.map((o,i)=>e.jsxs(O,{sx:{backgroundColor:i%2===0?"#C2DFE3":null},children:[e.jsx(x,{align:"left",children:o.name}),e.jsx(x,{align:"left",children:o.patient}),e.jsx(x,{children:s(o.start)}),e.jsx(x,{align:"left",children:t(o.start)}),e.jsx(x,{align:"left",children:o.location}),e.jsx(x,{align:"left",children:o.status}),e.jsx(x,{align:"left",children:e.jsx(w,{onClick:()=>a(`/schedule/${o._id}`),children:"Open"})})]},i))]})})})]})})}function Qr(){return e.jsxs(G,{sx:{display:"flex"},children:[e.jsx(ae,{cred:!0}),e.jsx(ze,{}),e.jsx(Yr,{})]})}const Vr={display:"flex",alignItems:"center",justifyContent:"center"},Xr={backgroundColor:"#5C6B73",boxShadow:"0 3px 5px 2px rgba(0, 0, 0, .3)",padding:"20px",color:"#ffffff",textAlign:"center",fontSize:"1.5rem"},Kr={marginTop:"20px",display:"flex",justifyContent:"space-around"};function Zr({open:n,handleConfirm:r,handleCancel:a}){let s=e.jsx("h2",{id:"confirmation-modal-title",children:"Do you want to start this procedure?"});return e.jsx($,{open:n,style:Vr,"aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-description",children:e.jsx(p,{sx:Xr,children:e.jsxs("div",{children:[s,e.jsxs("div",{style:Kr,children:[e.jsx(w,{onClick:()=>r(),variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Confirm"}),e.jsx(w,{onClick:()=>a(),variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Cancel"})]})]})})})}const eo={display:"flex",alignItems:"center",justifyContent:"center"},to={backgroundColor:"#5C6B73",boxShadow:"0 3px 5px 2px rgba(0, 0, 0, .3)",padding:"20px",color:"#ffffff",textAlign:"center",fontSize:"1.5rem"},ro={marginTop:"20px",display:"flex",justifyContent:"space-around"};function oo({open:n,handleConfirm:r,handleCancel:a}){let s=e.jsx("h2",{id:"confirmation-modal-title",children:"Do you want to cancel this procedure?"});return e.jsx($,{open:n,style:eo,"aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-description",children:e.jsx(p,{sx:to,children:e.jsxs("div",{children:[s,e.jsxs("div",{style:ro,children:[e.jsx(w,{onClick:()=>r(),variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Confirm"}),e.jsx(w,{onClick:()=>a(),variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Cancel"})]})]})})})}const no={display:"flex",alignItems:"center",justifyContent:"center"},ao={backgroundColor:"#5C6B73",boxShadow:"0 3px 5px 2px rgba(0, 0, 0, .3)",padding:"20px",color:"#ffffff",textAlign:"center",fontSize:"1.5rem"},so={marginTop:"20px",display:"flex",justifyContent:"space-around"};function lo({open:n,handleConfirm:r,handleCancel:a}){let s=e.jsx("h2",{id:"confirmation-modal-title",children:"Do you want to end this procedure?"});return e.jsx($,{open:n,style:no,"aria-labelledby":"confirmation-modal-title","aria-describedby":"confirmation-modal-description",children:e.jsx(p,{sx:ao,children:e.jsxs("div",{children:[s,e.jsxs("div",{style:so,children:[e.jsx(w,{onClick:()=>r(),variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Confirm"}),e.jsx(w,{onClick:()=>a(),variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},children:"Cancel"})]})]})})})}function io(){const[n,r]=l.useState(!1),{id:a}=Fe(),[s,t]=l.useState(!1),[o,i]=l.useState(!1),[c,u]=l.useState(!1),[d,f]=l.useState(""),[b,h]=l.useState(""),[m,M]=l.useState(),[S,y]=l.useState("");l.useEffect(()=>{(async()=>{try{W.getById(a).then(C=>M(C.data))}catch(C){console.error("Failed to fetch procedures:",C)}})()},[]);const v=async()=>{try{const j=await W.getById(a);M(j.data),y(j.data.status)}catch(j){console.error("Failed to fetch procedures:",j)}};l.useEffect(()=>{m&&(f(m.details),h(m.details),y(m.status))},[m]),l.useEffect(()=>{v()},[S]);const k=()=>{r(!0)},T=()=>{f(b),r(!1),a&&W.updateById(a,{details:b})},B=()=>{h(d),r(!1)},q=j=>h(j.target.value),U=()=>{t(!1),y("ongoing"),a&&W.updateById(a,{status:"ongoing"})},N=()=>{y("completed"),i(!1),a&&W.updateById(a,{status:"completed"})},I=()=>{y("canceled"),u(!1),a&&W.updateById(a,{status:"canceled"})};function A(j){if(!j)return"No time available";let C;return j instanceof Date?C=j:C=new Date(j),C.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}function g(j){if(!j)return"No time available";let C;return j instanceof Date?C=j:C=new Date(j),C.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!0})}return e.jsx(p,{sx:{flexGrow:1,p:3,marginLeft:"6em",marginTop:6,width:"100%",overflowX:"auto",minWidth:0},children:e.jsxs(F,{sx:{width:"90%",padding:2,margin:"auto",maxWidth:"none",backgroundColor:"#9DB4C0",flexGrow:1,overflow:"hidden"},children:[e.jsx(re,{component:F,sx:{marginBottom:2},children:e.jsx(te,{sx:{width:"100%"},"aria-label":"simple table",children:e.jsxs(J,{children:[e.jsxs(O,{children:[e.jsx(x,{align:"left",children:"Procedure"}),e.jsx(x,{align:"left",children:"Patient"}),e.jsx(x,{align:"left",children:"Date"}),e.jsx(x,{align:"left",children:"Time"}),e.jsx(x,{align:"left",children:"Location"}),e.jsx(x,{align:"left",children:"Status"})]}),e.jsxs(O,{sx:{backgroundColor:"#C2DFE3"},children:[e.jsx(x,{align:"left",children:m==null?void 0:m.name}),e.jsx(x,{align:"left",children:m==null?void 0:m.patient}),e.jsx(x,{align:"left",children:A(m==null?void 0:m.start)}),e.jsx(x,{align:"left",children:g(m==null?void 0:m.start)}),e.jsx(x,{align:"left",children:m==null?void 0:m.location}),e.jsx(x,{align:"left",children:S})]})]})})}),n?e.jsx(E,{fullWidth:!0,multiline:!0,minRows:4,value:b,onChange:q,variant:"outlined",sx:{backgroundColor:"#FFFFFF",margin:"16px 0",minHeight:"500px"}}):e.jsx(D,{variant:"body1",gutterBottom:!0,sx:{whiteSpace:"pre-line",backgroundColor:"#E0FBFC",padding:2,minHeight:"500px"},children:d}),e.jsx(p,{children:n?e.jsxs(p,{children:[e.jsx(w,{variant:"contained",onClick:T,sx:{backgroundColor:"#5C6B73",marginRight:"8px"},children:"Save changes"}),e.jsx(w,{variant:"contained",color:"error",sx:{backgroundColor:"#5C6B73"},onClick:B,children:"Cancel edit"})]}):e.jsxs(p,{sx:{display:"flex",justifyContent:"space-between",marginTop:2},children:[e.jsxs(p,{children:[S==="waiting"&&e.jsx(w,{variant:"contained",onClick:()=>t(!0),sx:{backgroundColor:"#5C6B73",marginRight:"8px"},children:"Start procedure"}),S==="ongoing"&&e.jsx(w,{variant:"contained",onClick:()=>i(!0),sx:{backgroundColor:"#5C6B73",marginRight:"8px"},children:"End procedure"})]}),(S==="waiting"||S==="ongoing")&&e.jsxs(p,{children:[e.jsx(w,{variant:"contained",onClick:k,sx:{backgroundColor:"#5C6B73",marginRight:"8px"},children:"Edit procedure"}),e.jsx(w,{variant:"contained",onClick:()=>u(!0),color:"error",sx:{backgroundColor:"#5C6B73"},children:"Cancel procedure"})]})]})}),e.jsx(Zr,{open:s,handleConfirm:U,handleCancel:()=>t(!1)}),e.jsx(lo,{open:o,handleConfirm:N,handleCancel:()=>i(!1)}),e.jsx(oo,{open:c,handleConfirm:I,handleCancel:()=>u(!1)})]})})}function co(){return e.jsxs(G,{sx:{display:"flex"},children:[e.jsx(ae,{cred:!0}),e.jsx(ze,{}),e.jsx(io,{})]})}const uo=["In Stock","Low Stock","Out of Stock","On Order"],ho=["Diagonose Equipment","Therapeutic Equipment","Surgical Equipment","Monitoring Equipment","Laboratory Equipment","Medical Consumables","Radiology Equipment","Durable Medical Equipment","Others"];function at({open:n,onClose:r,onOk:a,title:s,item:t}){const o={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},i={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2},[c,u]=l.useState((t==null?void 0:t.name)||""),[d,f]=l.useState((t==null?void 0:t.category)||""),[b,h]=l.useState((t==null?void 0:t.quantity)??""),[m,M]=l.useState((t==null?void 0:t.status)||"");l.useEffect(()=>{u((t==null?void 0:t.name)||""),f((t==null?void 0:t.category)||""),h((t==null?void 0:t.quantity)??""),M((t==null?void 0:t.status)||"")},[t]);const S=()=>{u(""),f(""),h(""),M("")};return e.jsx("div",{children:e.jsx($,{open:n,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:o,children:[e.jsx(D,{id:"procedure-modal-title",variant:"h6",component:"h2",color:"common.white",children:s}),e.jsx(E,{required:!0,id:"name",label:"Name",sx:i,onChange:y=>u(y.target.value),value:c}),e.jsxs(ge,{required:!0,sx:i,children:[e.jsx(je,{id:"medical-equipment-category",children:"Category"}),e.jsx(be,{labelId:"medical-equipment-category",id:"medical-equipment-category",value:d,label:"Category",onChange:y=>f(y.target.value),sx:{color:"white","& .MuiSvgIcon-root":{color:"white"}},MenuProps:{PaperProps:{style:{maxHeight:30*4.5,width:"inherit"},sx:{"&::-webkit-scrollbar":{width:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"white"},"&.MuiPaper-root":{overflowY:"scroll"}}}},children:ho.map((y,v)=>e.jsx(R,{value:y,children:y},y+v))})]}),e.jsx(E,{required:!0,id:"quantity",label:"Quantity Available",sx:i,onChange:y=>h(y.target.value),value:b}),e.jsxs(ge,{required:!0,sx:i,children:[e.jsx(je,{id:"medical-equipment-status",children:"Status"}),e.jsx(be,{labelId:"medical-equipment-status",id:"medical-equipment-status",value:m,label:"Status",onChange:y=>M(y.target.value),sx:{color:"white","& .MuiSvgIcon-root":{color:"white"}},MenuProps:{PaperProps:{style:{width:"inherit"}}},children:uo.map((y,v)=>e.jsx(R,{value:y,children:y},y+v))})]}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:()=>{a({name:c,category:d,quantity:b,status:m}),S()},children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:r,children:"Cancel"})]})]})})})}const Pe=ne("/resource/equipment");function xo({dataSource:n,onEdit:r,onDelete:a}){const[s,t]=l.useState(""),[o,i]=l.useState(!1),[c,u]=l.useState({}),d=h=>({"In Stock":"#409832","Low Stock":"#B1840F","Out of Stock":"#B1190F","On Order":"#2686AF"})[h]||"#000";l.useEffect(()=>{s&&Pe.getById(s).then(h=>{u(h.data),i(!0)})},[s]);const f=h=>{Pe.updateById(s,h).then(m=>{console.log("successfully updated ",m.data),i(!1),t(""),r()}).catch(m=>{console.log(m)})},b=h=>{Pe.deleteById(h).then(m=>{console.log("successfully deleted ",m.data),i(!1),t(""),a()}).catch(m=>{console.log(m)})};return e.jsxs(re,{component:F,sx:{width:"100%",border:"solid 0.1em grey",shadow:"inherit"},children:[e.jsx(at,{open:o,onClose:()=>{t(""),i(!1)},onOk:f,title:"Edit Medical Equipment",item:c}),e.jsxs(te,{"aria-label":"simple table",stickyHeader:!0,sx:{width:"100%"},children:[e.jsx(oe,{children:e.jsxs(O,{children:[e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Item Name"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Item ID"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Category"})}),e.jsx(x,{align:"left",sx:{fontWeight:700,width:"20%"},children:e.jsx(L,{active:!0,children:"Quantity (Available / Total)"})}),e.jsx(x,{align:"left",sx:{fontWeight:700,width:"13%"},children:e.jsx(L,{active:!0,children:"Status"})}),e.jsx(x,{align:"left",sx:{fontWeight:700,width:"15%"},children:"Actions"})]})}),n.length===0&&e.jsx(J,{children:e.jsx(O,{children:e.jsx(x,{align:"center",colSpan:6,sx:{backgroundColor:"#f5f5f5"},children:e.jsx(D,{variant:"h5",sx:{color:"#989A9D"},children:"No Data"})})})}),e.jsx(J,{children:n.map((h,m)=>e.jsxs(O,{sx:{"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"#f5f5f5"}},children:[e.jsx(x,{align:"left",component:"th",scope:"row",children:h.name}),e.jsx(x,{align:"left",children:h._id}),e.jsx(x,{align:"left",children:h.category}),e.jsxs(x,{align:"left",children:[h.currentQuantity," / ",h.quantity]}),e.jsx(x,{align:"left",style:{color:d(h.status)},children:h.status}),e.jsxs(x,{align:"left",size:"medium",children:[e.jsx(w,{variant:"outlined",sx:{fontSize:"13px"},onClick:()=>t(h._id||""),children:"Edit"}),e.jsx(ee,{size:"medium",onClick:()=>b(h._id||""),children:e.jsx(Me,{})})]})]},m))})]})]})}const fo=["Antipyretics","Analgesics","Antimalarial","Antibiotics","Antiseptics","Antacids","Antihistamines","Antifungals","Antivirals","Bronchodilators","Laxatives","Antidiarrheals","Antitussives","Hormones","Immunosuppressants","Muscle Relaxants","Pain Killers","Stimulants","Tranquilizers","Vasodilators","NSAID"].sort().concat("Others");function st({open:n,onClose:r,onOk:a,title:s,item:t}){const o={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},i={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2},[c,u]=l.useState((t==null?void 0:t.name)||""),[d,f]=l.useState((t==null?void 0:t.category)||""),[b,h]=l.useState((t==null?void 0:t.usage)||""),[m,M]=l.useState((t==null?void 0:t.packaging)||""),[S,y]=l.useState((t==null?void 0:t.quantity)??"");l.useEffect(()=>{u((t==null?void 0:t.name)||""),f((t==null?void 0:t.category)||""),h((t==null?void 0:t.usage)||""),M((t==null?void 0:t.packaging)||""),y((t==null?void 0:t.quantity)??"")},[t]);const v=()=>{u(""),f(""),h(""),M(""),y("")};return e.jsx("div",{children:e.jsx($,{open:n,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:o,children:[e.jsx(D,{id:"procedure-modal-title",variant:"h6",component:"h2",color:"common.white",children:s}),e.jsx(E,{required:!0,id:"name",label:"Name",sx:i,onChange:k=>u(k.target.value),value:c}),e.jsxs(ge,{required:!0,sx:i,children:[e.jsx(je,{id:"medicine-category",children:"Category"}),e.jsx(be,{labelId:"medicine-category",id:"medical-equipment-category",value:d,label:"Category",onChange:k=>f(k.target.value),sx:{color:"white","& .MuiSvgIcon-root":{color:"white"}},MenuProps:{PaperProps:{style:{maxHeight:30*4.5,width:"inherit"},sx:{"&::-webkit-scrollbar":{width:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"white"},"&.MuiPaper-root":{overflowY:"scroll"}}}},children:fo.map((k,T)=>e.jsx(R,{value:k,children:k},k+T))})]}),e.jsx(E,{required:!0,id:"usage",label:"Usage",sx:i,onChange:k=>h(k.target.value),value:b}),e.jsx(E,{required:!0,id:"packaging",label:"Packaging",sx:i,onChange:k=>M(k.target.value),value:m}),e.jsx(E,{required:!0,id:"quantity",label:"Stock Quantity",sx:i,onChange:k=>y(k.target.value),value:S}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:()=>{a({name:c,category:d,usage:b,packaging:m,quantity:S}),v()},children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:r,children:"Cancel"})]})]})})})}const Ie=ne("/resource/medicine");function mo({dataSource:n,onEdit:r,onDelete:a}){const[s,t]=l.useState(""),[o,i]=l.useState({}),[c,u]=l.useState(!1);l.useEffect(()=>{s&&Ie.getById(s).then(b=>{i(b.data),u(!0)})},[s]);const d=b=>{console.log(b),Ie.updateById(s,b).then(h=>{console.log("successfully updated ",h.data),u(!1),t(""),r()}).catch(h=>{console.log(h)})},f=b=>{Ie.deleteById(b).then(h=>{console.log("successfully deleted ",h.data),u(!1),t(""),a()}).catch(h=>{console.log(h)})};return e.jsxs(re,{component:F,sx:{width:"100%",border:"solid 0.1em grey",shadow:"inherit"},children:[e.jsx(st,{open:c,onClose:()=>{t(""),u(!1)},onOk:d,title:"Edit Medicine",item:o}),e.jsxs(te,{"aria-label":"simple table",stickyHeader:!0,sx:{width:"100%"},children:[e.jsx(oe,{children:e.jsxs(O,{children:[e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Medicine Name"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Category"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Usage"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Packaging"})}),e.jsx(x,{align:"left",sx:{fontWeight:700,width:"14%"},children:e.jsx(L,{active:!0,children:"Stock Quantity"})}),e.jsx(x,{align:"left",sx:{fontWeight:700,width:"15%"},children:"Actions"})]})}),n.length===0&&e.jsx(J,{children:e.jsx(O,{children:e.jsx(x,{align:"center",colSpan:6,sx:{backgroundColor:"#f5f5f5"},children:e.jsx(D,{variant:"h5",sx:{color:"#989A9D"},children:"No Data"})})})}),e.jsx(J,{children:n.map((b,h)=>e.jsxs(O,{sx:{"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"#f5f5f5"}},children:[e.jsx(x,{align:"left",component:"th",scope:"row",children:b.name}),e.jsx(x,{align:"left",children:b.category}),e.jsx(x,{align:"left",children:b.usage}),e.jsx(x,{align:"left",children:b.packaging}),e.jsx(x,{align:"left",children:b.quantity}),e.jsxs(x,{align:"left",size:"medium",children:[e.jsx(w,{variant:"outlined",sx:{fontSize:"13px"},onClick:()=>t(b._id||""),children:"Edit"}),e.jsx(ee,{size:"medium",onClick:()=>f(b._id||""),children:e.jsx(Me,{})})]})]},h))})]})]})}function lt({open:n,onClose:r,onOk:a,title:s}){const t={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},o={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2};return e.jsx("div",{children:e.jsx($,{open:n,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:t,children:[e.jsx(D,{id:"procedure-modal-title",variant:"h6",component:"h2",color:"common.white",children:s}),e.jsx(E,{required:!0,id:"name",label:"Name",sx:o}),e.jsx(E,{required:!0,id:"position",label:"Position",sx:o}),e.jsx(E,{required:!0,id:"contactInformation",label:"Contact Information",sx:o}),e.jsx(E,{required:!0,id:"responsibilities",label:"Responsibilities",sx:o}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:a,children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:r,children:"Cancel"})]})]})})})}const po=[{id:"1",name:"Li Ming",position:"Hospital Administrator",contactInformation:"123-456-7890",responsibilities:"overall operation management of the hospital"},{id:"2",name:"Zhang Hua",position:"Director of Nursing",contactInformation:"123-456-7890",responsibilities:"Manages the nursing team"},{id:"3",name:"Wang Li",position:"Chief Pharmacist",contactInformation:"123-456-7890",responsibilities:"Oversees the operations of the pharmacy department"},{id:"4",name:"Zhao Qiang",position:"IT Manager",contactInformation:"123-456-7890",responsibilities:"Manages the hospital's information systems"}];function go(){const[n,r]=l.useState("");return e.jsxs(re,{component:F,sx:{width:"100%",border:"solid 0.1em grey",shadow:"inherit"},children:[e.jsx(lt,{open:!!n,onClose:()=>r(""),onOk:()=>{},title:"Edit Officer"}),e.jsxs(te,{"aria-label":"simple table",stickyHeader:!0,sx:{width:"100%"},children:[e.jsx(oe,{children:e.jsxs(O,{children:[e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Name"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Position"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Contact Information"})}),e.jsx(x,{align:"left",sx:{fontWeight:700,width:"30%"},children:e.jsx(L,{active:!0,children:"Responsibilities"})}),e.jsx(x,{align:"left",sx:{fontWeight:700,width:"15%"},children:"Actions"})]})}),e.jsx(J,{children:po.map((a,s)=>e.jsxs(O,{sx:{"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"#f5f5f5"}},children:[e.jsx(x,{align:"left",component:"th",scope:"row",children:a.name}),e.jsx(x,{align:"left",children:a.position}),e.jsx(x,{align:"left",children:a.contactInformation}),e.jsx(x,{align:"left",children:a.responsibilities}),e.jsxs(x,{align:"left",size:"medium",children:[e.jsx(w,{variant:"outlined",sx:{fontSize:"13px"},onClick:()=>r(a.name),children:"Edit"}),e.jsx(ee,{size:"medium",children:e.jsx(Me,{})})]})]},s))})]})]})}const jo=["Vacant","Low Occupancy","Moderate Occupancy","High Occupancy","Near Capacity","Full Capacity"];function it({open:n,onClose:r,onOk:a,title:s,item:t}){const o={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},i={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2},[c,u]=l.useState((t==null?void 0:t.name)||""),[d,f]=l.useState((t==null?void 0:t.location)||""),[b,h]=l.useState((t==null?void 0:t.capacity)??""),[m,M]=l.useState((t==null?void 0:t.status)||"");l.useEffect(()=>{u((t==null?void 0:t.name)||""),f((t==null?void 0:t.location)||""),h((t==null?void 0:t.capacity)??""),M((t==null?void 0:t.status)||"")},[t]);const S=()=>{u(""),f(""),h(""),M("")};return e.jsx("div",{children:e.jsx($,{open:n,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:o,children:[e.jsx(D,{id:"procedure-modal-title",variant:"h6",component:"h2",color:"common.white",children:s}),e.jsx(E,{required:!0,id:"name",label:"Name",sx:i,onChange:y=>u(y.target.value),value:c}),e.jsx(E,{required:!0,id:"room-number",label:"Room Number",sx:i,onChange:y=>f(y.target.value),value:d}),e.jsx(E,{required:!0,id:"capacity",label:"Capacity",sx:i,onChange:y=>h(y.target.value),value:b}),e.jsxs(ge,{required:!0,sx:i,children:[e.jsx(je,{id:"room-status",children:"Status"}),e.jsx(be,{labelId:"room-status",id:"room-status-options",value:m,label:"Status",onChange:y=>M(y.target.value),sx:{color:"white","& .MuiSvgIcon-root":{color:"white"}},MenuProps:{PaperProps:{style:{maxHeight:30*4.5,width:"inherit"},sx:{"&::-webkit-scrollbar":{width:"10px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"white"},"&.MuiPaper-root":{overflowY:"scroll"}}}},children:jo.map((y,v)=>e.jsx(R,{value:y,children:y},y+v))})]}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:()=>{a({name:c,location:d,capacity:b,status:m,schedule:[]}),S()},children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:r,children:"Cancel"})]})]})})})}const Te=ne("/resource/room");function bo({dataSource:n,onEdit:r,onDelete:a}){const[s,t]=l.useState(""),[o,i]=l.useState(!1),[c,u]=l.useState({}),d=h=>({Vacant:"#409832","Low Occupancy":"#9ACD32","Moderate Occupancy":"#B1840F","High Occupancy":"#FF8C00","Near Capacity":"#FF4500","Full Capacity":"#B1190F"})[h]||"#000";l.useEffect(()=>{s&&Te.getById(s).then(h=>{u(h.data),i(!0)})},[s]);const f=h=>{Te.updateById(s,h).then(m=>{console.log("successfully updated ",m.data),i(!1),t(""),r()}).catch(m=>{console.log(m)})},b=h=>{Te.deleteById(h).then(m=>{console.log("successfully deleted ",m.data),i(!1),t(""),a()}).catch(m=>{console.log(m)})};return e.jsxs(re,{component:F,sx:{width:"100%",border:"solid 0.1em grey",shadow:"inherit"},children:[e.jsx(it,{open:o,onClose:()=>{t(""),i(!1)},onOk:f,title:"Edit Room",item:c}),e.jsxs(te,{"aria-label":"simple table",stickyHeader:!0,sx:{width:"100%"},children:[e.jsx(oe,{children:e.jsxs(O,{children:[e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Room Name"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Room Number"})}),e.jsx(x,{align:"center",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Capacity (Available / Total)"})}),e.jsx(x,{align:"left",sx:{fontWeight:700},children:e.jsx(L,{active:!0,children:"Current Status"})}),e.jsx(x,{align:"left",sx:{fontWeight:700,width:"15%"},children:"Actions"})]})}),n.length===0&&e.jsx(J,{children:e.jsx(O,{children:e.jsx(x,{align:"center",colSpan:5,sx:{backgroundColor:"#f5f5f5"},children:e.jsx(D,{variant:"h5",sx:{color:"#989A9D"},children:"No Data"})})})}),e.jsx(J,{children:n.map((h,m)=>e.jsxs(O,{sx:{"&:last-child td, &:last-child th":{border:0},"&:hover":{backgroundColor:"#f5f5f5"}},children:[e.jsx(x,{align:"left",component:"th",scope:"row",children:h.name}),e.jsx(x,{align:"left",children:h.location}),e.jsxs(x,{align:"center",children:[h.currentCapacity," / ",h.capacity]}),e.jsx(x,{align:"left",style:{color:d(h.status)},children:h.status}),e.jsxs(x,{align:"left",size:"medium",children:[e.jsx(w,{variant:"outlined",sx:{fontSize:"13px"},onClick:()=>t(h._id||""),children:"Edit"}),e.jsx(ee,{size:"medium",onClick:()=>b(h._id||""),children:e.jsx(Me,{})})]})]},m))})]})]})}function yo({onSearch:n}){const[r,a]=Z.useState(null),[s,t]=Z.useState(""),o=!!r,i=d=>{a(d.currentTarget)},c=()=>{a(null)},u=d=>{d.preventDefault(),n(s)};return l.useEffect(()=>{n(s)},[s]),e.jsx(p,{sx:{display:"flex",alignItems:"left",border:"1px solid",borderRadius:1,marginTop:"1em",marginBottom:"1em"},children:e.jsxs(F,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%"},onSubmit:u,children:[e.jsx(p,{sx:{p:1},children:e.jsx(Ee,{})}),e.jsx(ve,{sx:{ml:1,flex:1},placeholder:"Search",inputProps:{"aria-label":"Search"},onChange:d=>{t(d.target.value)}}),e.jsx(ue,{sx:{height:28,m:.5},orientation:"vertical"}),e.jsx(w,{color:"primary",sx:{p:"10px","&:hover":{backgroundColor:"#e0e0e0"}},"aria-label":"Search_by",endIcon:e.jsx(Be,{}),onClick:i,children:"Search By"}),e.jsxs(we,{anchorEl:r,id:"search_medicalEquipment_by",open:o,onClose:c,onClick:c,children:[e.jsx(R,{children:"Name"}),e.jsx(R,{children:"Category"}),e.jsx(R,{children:"Status"}),e.jsx(R,{children:"ID"}),e.jsx(R,{children:"All"})]})]})})}function Co({onSearch:n}){const[r,a]=Z.useState(null),[s,t]=Z.useState(""),o=!!r,i=d=>{a(d.currentTarget)},c=d=>{d.preventDefault(),n(s)},u=()=>{a(null)};return l.useEffect(()=>{n(s)},[s]),e.jsx(p,{sx:{display:"flex",alignItems:"left",border:"1px solid",borderRadius:1,marginTop:"1em",marginBottom:"1em"},children:e.jsxs(F,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%"},onSubmit:c,children:[e.jsx(p,{sx:{p:1},children:e.jsx(Ee,{})}),e.jsx(ve,{sx:{ml:1,flex:1},placeholder:"Search",inputProps:{"aria-label":"Search"},onChange:d=>{t(d.target.value)}}),e.jsx(ue,{sx:{height:28,m:.5},orientation:"vertical"}),e.jsx(w,{color:"primary",sx:{p:"10px","&:hover":{backgroundColor:"#e0e0e0"}},"aria-label":"Search_by",endIcon:e.jsx(Be,{}),onClick:i,children:"Search By"}),e.jsxs(we,{anchorEl:r,id:"search_medicalEquipment_by",open:o,onClose:u,onClick:u,children:[e.jsx(R,{children:"Name"}),e.jsx(R,{children:"Category"}),e.jsx(R,{children:"Usage"}),e.jsx(R,{children:"Packaging"}),e.jsx(R,{children:"All"})]})]})})}function wo(){const[n,r]=Z.useState(null),a=!!n,s=o=>{r(o.currentTarget)},t=()=>{r(null)};return e.jsx(p,{sx:{display:"flex",alignItems:"left",border:"1px solid",borderRadius:1,marginTop:"1em",marginBottom:"1em"},children:e.jsxs(F,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(p,{sx:{p:1},children:e.jsx(Ee,{})}),e.jsx(ve,{sx:{ml:1,flex:1},placeholder:"Search",inputProps:{"aria-label":"Search"}}),e.jsx(ue,{sx:{height:28,m:.5},orientation:"vertical"}),e.jsx(w,{color:"primary",sx:{p:"10px","&:hover":{backgroundColor:"#e0e0e0"}},"aria-label":"Search_by",endIcon:e.jsx(Be,{}),onClick:s,children:"Search By"}),e.jsxs(we,{anchorEl:n,id:"search_officers_by",open:a,onClose:t,onClick:t,children:[e.jsx(R,{children:"Position"}),e.jsx(R,{children:"Category"}),e.jsx(R,{children:"Department"}),e.jsx(R,{children:"All"})]})]})})}function vo({onSearch:n}){const[r,a]=Z.useState(null),[s,t]=Z.useState(""),o=!!r,i=d=>{a(d.currentTarget)},c=()=>{a(null)},u=d=>{d.preventDefault(),n(s)};return l.useEffect(()=>{n(s)},[s]),e.jsx(p,{sx:{display:"flex",alignItems:"left",border:"1px solid",borderRadius:1,marginTop:"1em",marginBottom:"1em"},children:e.jsxs(F,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%"},onSubmit:u,children:[e.jsx(p,{sx:{p:1},children:e.jsx(Ee,{})}),e.jsx(ve,{sx:{ml:1,flex:1},placeholder:"Search",inputProps:{"aria-label":"Search"},onChange:d=>{t(d.target.value)}}),e.jsx(ue,{sx:{height:28,m:.5},orientation:"vertical"}),e.jsx(w,{color:"primary",sx:{p:"10px","&:hover":{backgroundColor:"#e0e0e0"}},"aria-label":"Search_by",endIcon:e.jsx(Be,{}),onClick:i,children:"Search By"}),e.jsxs(we,{anchorEl:r,id:"search_room_by",open:o,onClose:c,onClick:c,children:[e.jsx(R,{children:"Name"}),e.jsx(R,{children:"Number"}),e.jsx(R,{children:"Capacity"}),e.jsx(R,{children:"All"})]})]})})}const Ye=["Medical Equipment","Medicine","Officers","Room"];function So(){const[n,r]=l.useState(0),[a,s]=l.useState(""),[t,o]=l.useState([]),[i,c]=l.useState([]),[u,d]=l.useState([]),[f,b]=l.useState([]),[h,m]=l.useState([]),[M,S]=l.useState([]),[y,v]=l.useState("");async function k(){try{switch(n){case 0:await Pe.getAll().then(C=>{o(C.data)});break;case 1:await Ie.getAll().then(C=>{d(C.data)});break;case 2:break;case 3:await Te.getAll().then(C=>{m(C.data)});break;default:break}}catch(C){console.error("Error fetching data:",C)}}l.useEffect(()=>{k()},[n]);const T=(C,P)=>{r(P)},B=()=>{s(Ye[n])},q=C=>{switch(n){case 0:Pe.create(C).then(P=>{o([...t,P.data]),s("")});break;case 1:Ie.create(C).then(P=>{d([...u,P.data]),s("")});break;case 2:break;case 3:Te.create(C).then(P=>{m([...h,P.data]),s("")});break}},U=()=>{k(),s("")},N=()=>{k(),s("")};l.useEffect(()=>{c(t),y&&I("Medical Equipment",y)},[t]),l.useEffect(()=>{b(u),y&&I("Medicine",y)},[u]),l.useEffect(()=>{S(h),y&&I("Room",y)},[h]);const I=(C,P)=>{v(P),console.log("Search from",C,"for: ",P);let z={};switch(C){case"Medical Equipment":P?(z=t.filter(_=>_.name.toLowerCase().includes(P.toLowerCase())||_.category.toLowerCase().includes(P.toLowerCase())||_.status.toLowerCase().includes(P.toLowerCase())||_.quantity.toString().includes(P.toLowerCase())||_._id.toString().includes(P.toLowerCase())),c(z)):c(t);break;case"Medicine":P?(z=u.filter(_=>_.name.toLowerCase().includes(P.toLowerCase())||_.category.toLowerCase().includes(P.toLowerCase())||_.usage.toLowerCase().includes(P.toLowerCase())||_.packaging.toLowerCase().includes(P.toLowerCase())||_.quantity.toString().includes(P.toLowerCase())),b(z)):b(u);break;case"Room":P?(z=h.filter(_=>_.name.toLowerCase().includes(P.toLowerCase())||_.status.toLowerCase().includes(P.toLowerCase())||_.capacity.toString().includes(P.toLowerCase())||_.location.toLowerCase().includes(P.toLowerCase())||_._id.toString().includes(P.toLowerCase())),S(z)):S(h);break}},A=[e.jsx(at,{open:a==="Medical Equipment",onClose:()=>s(""),onOk:C=>q(C),title:"Create New Equipment"}),e.jsx(st,{open:a==="Medicine",onClose:()=>s(""),onOk:C=>{q(C)},title:"Create New Medicine"}),e.jsx(lt,{open:a==="Officers",onClose:()=>s(""),onOk:()=>{},title:"Create New Officer"}),e.jsx(it,{open:a==="Room",onClose:()=>s(""),onOk:C=>{q(C)},title:"Create New Room"})],g=[e.jsx(xo,{dataSource:i,onEdit:U,onDelete:N}),e.jsx(mo,{dataSource:f,onEdit:U,onDelete:N}),e.jsx(go,{}),e.jsx(bo,{dataSource:M,onEdit:U,onDelete:N})],j=[e.jsx(yo,{onSearch:C=>I("Medical Equipment",C)}),e.jsx(Co,{onSearch:C=>I("Medicine",C)}),e.jsx(wo,{}),e.jsx(vo,{onSearch:C=>I("Room",C)})];return e.jsxs(p,{sx:{flexGrow:1,width:"100%",height:"fit-content",minWidth:0,alignItems:"center",justifyContent:"center"},children:[e.jsx(D,{variant:"h4",pb:1,gutterBottom:!0,children:"Resource"}),e.jsxs(p,{sx:{border:"lightgrey solid",mt:3,p:1,backgroundColor:"#e5e5e5",borderRadius:1,width:"100%",height:"100%"},children:[e.jsx(At,{sx:{width:"100%"},value:n,onChange:T,children:Ye.map((C,P)=>e.jsx(Nt,{label:C,value:P,sx:{color:"dark grey"}},C))}),A[n],e.jsx(p,{display:"flex",sx:{mb:3,mt:3},children:e.jsxs(me,{container:!0,spacing:2,sx:{alignItems:"center",justifyContent:"space-between"},children:[e.jsx(me,{item:!0,style:{flexGrow:1},children:j[n]}),e.jsx(me,{item:!0,children:e.jsxs(Ze,{variant:"extended",size:"small",color:"primary",sx:{fontSize:"12px",alignItems:"center",borderRadius:1,height:"45px"},onClick:B,children:[e.jsx(et,{fontSize:"small"}),"Create Item"]})})]})}),g[n]]})]})}function ko(){return e.jsxs(G,{id:"resourceScreen",sx:{display:"flex",flexDirection:"column",alignContent:"start",overflow:"scroll",width:"100vw",height:"100vh"},children:[e.jsx(Se,{}),e.jsx(ae,{cred:!0}),e.jsx(p,{component:"main",sx:{mt:"75px",ml:{sm:"100px",md:"120px"},pl:{sm:"50px",md:"40px"},backgroundColor:"#f5f5f5",width:"80%",height:"90%",pr:9,pt:2,pb:2,overflow:"scroll"},children:e.jsx(So,{})})]})}const Po=[{id:"name",label:"Template Name",minWidth:170},{id:"open",label:"",minWidth:170,align:"right"}];function Io({handleAddPathwayClick:n}){const[r,a]=l.useState([]),s=H();l.useEffect(()=>{pe.getAll().then(({data:o})=>a(o)).catch(o=>console.log(o))},[]);const t=o=>{pe.deleteById(o).then(({data:i})=>{const c=r.filter(u=>u._id!==i._id);a(c)}).catch(i=>console.log(i)),pe.getById(o).then(({data:i})=>{for(let c of i.procedures)W.deleteById(c).then(u=>console.log(u.data)).catch(u=>console.log(u))})};return e.jsxs(p,{sx:{flexGrow:1,width:"100%",height:"fit-content",minWidth:0,alignItems:"center",justifyContent:"center"},children:[e.jsx(D,{variant:"h4",pb:1,gutterBottom:!0,children:"Template Pathway"}),e.jsx(F,{sx:{width:"100%",overflow:"hidden",border:"solid 0.1em grey",shadow:"inherit"},children:e.jsx(re,{sx:{maxHeight:440},children:e.jsxs(te,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(oe,{children:e.jsx(O,{children:Po.map(o=>e.jsx(x,{align:o.align,style:{minWidth:o.minWidth},children:o.label&&e.jsx(L,{active:!0,sx:{fontWeight:700},children:o.label})},o.id))})}),e.jsx(J,{children:r.map(o=>e.jsxs(O,{hover:!0,role:"checkbox",tabIndex:-1,children:[e.jsx(x,{children:o.name}),e.jsxs(x,{align:"right",children:[e.jsx(w,{variant:"contained",sx:{m:1},onClick:()=>s("/manager-template/"+o._id),children:"Open"}),e.jsx(w,{variant:"contained",sx:{m:1},onClick:()=>t(o._id),children:"Delete"})]})]},o._id))})]})})}),e.jsx(w,{variant:"contained",sx:{m:1},onClick:n,children:"Add Pathway"})]})}function To({open:n,handleClose:r}){const[a,s]=l.useState(""),t=H(),o=()=>{let c={name:a,patient:"unknown",status:"unpublished",is_template:!0,procedures:[]};pe.create(c).then(u=>{t("/manager-template/"+u.data._id)}).catch(u=>console.log(u)),r()},i={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"#5C6B73",boxShadow:24,p:4};return e.jsx($,{open:n,onClose:r,"aria-labelledby":"blank-pathway-modal-title",children:e.jsxs(p,{sx:i,children:[e.jsx(D,{id:"blank-pathway-modal-title",variant:"h6",component:"h2",children:"Create New Pathway"}),e.jsx(E,{fullWidth:!0,margin:"normal",required:!0,label:"Pathway Name",value:a,onChange:c=>s(c.target.value)}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[e.jsx(w,{variant:"contained",color:"primary",onClick:o,children:"Confirm"}),e.jsx(w,{variant:"contained",onClick:r,children:"Cancel"})]})]})})}function Mo(){const[n,r]=l.useState(!1);return e.jsxs(G,{sx:{display:"flex",flexDirection:"column",width:"100vw",height:"100vh"},children:[e.jsx(ae,{cred:!0}),e.jsx(Se,{}),e.jsx(p,{component:"main",sx:{mt:"75px",ml:{sm:"100px",md:"120px"},pl:{sm:"50px",md:"40px"},backgroundColor:"#f5f5f5",width:"80%",height:"90%",pr:9,pt:2,pb:2,overflow:"scroll"},children:e.jsx(Io,{handleAddPathwayClick:()=>r(!0)})}),e.jsx(To,{open:n,handleClose:()=>r(!1)})]})}function Eo({templatePathway:n}){return e.jsx(F,{elevation:2,sx:{padding:2,marginBottom:2},children:e.jsx(p,{display:"flex",justifyContent:"space-between",alignItems:"center",children:e.jsxs(D,{variant:"h6",sx:{marginRight:2},children:["Pathway Name: ",n.name]})})})}function Bo({templatePathway:n,allProcedures:r,handleDeleteProcedure:a,handleEditProcedure:s}){var o;const t=[];for(let i of r)(o=n.procedures)!=null&&o.includes(i._id)&&t.push(i);return e.jsxs(te,{children:[e.jsx(oe,{children:e.jsxs(O,{children:[e.jsx(x,{children:"Procedure Name"}),e.jsx(x,{})]})}),e.jsx(J,{children:t==null?void 0:t.map((i,c)=>e.jsxs(O,{hover:!0,sx:{cursor:"pointer"},children:[e.jsx(x,{children:i.name}),e.jsx(x,{align:"right",children:e.jsxs("div",{children:[e.jsx(w,{variant:"outlined",size:"small",sx:{marginRight:"8px"},onClick:()=>s(i._id),children:"Edit"}),e.jsx(w,{variant:"outlined",size:"small",onClick:()=>a(i._id),children:"Delete"})]})})]},c))})]})}const Do={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},Qe={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2};function Ao({showModal:n,templatePathway:r,handleClose:a,updatePathway:s}){const[t,o]=l.useState(""),[i,c]=l.useState(""),u=()=>{const d={name:t,caregiver:[],location:"unknown",start:new Date,end:new Date,details:i,patient:"unknown",status:"waiting"};W.create(d).then(f=>{s(f.data._id);const b={...r,procedures:[...r.procedures,f.data._id]};Q.updateById(r._id,b).then(h=>console.log(h.data)).catch(h=>console.log(h))}).catch(f=>console.log(f)),a()};return e.jsx("div",{children:e.jsx($,{open:n,onClose:a,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:Do,children:[e.jsx(D,{id:"procedure-modal-title",variant:"h6",component:"h2",color:"common.white",children:"Procedure Information"}),e.jsx(E,{required:!0,id:"procedure-name",label:"Procedure Name",value:t,onChange:d=>o(d.target.value),sx:Qe}),e.jsx(E,{id:"procedure-detail",label:"Procedure Detail",value:i,onChange:d=>c(d.target.value),multiline:!0,rows:4,sx:Qe}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:u,children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:a,children:"Cancel"})]})]})})})}function No({handleAddProcedure:n}){return e.jsxs(p,{display:"flex",justifyContent:"space-between",padding:2,children:[e.jsx(w,{variant:"contained",color:"primary",onClick:n,children:"Add Procedure"}),e.jsx(p,{sx:{display:"flex",gap:1}})]})}const Ro={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"#5C6B73",boxShadow:24,p:4,display:"flex",flexDirection:"column",borderRadius:2},fe={"& label.Mui-focused":{color:"white"},"& label":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"},"& input":{color:"white"},"& textarea":{color:"white"}},my:2};function qo({modalOpen:n,handleClose:r,procedureToEditId:a,pathway:s,refetchProcedures:t}){const[o,i]=l.useState(""),[c,u]=l.useState([]),[d,f]=l.useState(""),[b,h]=l.useState(""),[m,M]=l.useState(""),[S,y]=l.useState(""),[v,k]=l.useState([]),[T,B]=l.useState({procedureName:"",caregivers:"",location:"",startTime:"",endTime:"",details:""});l.useEffect(()=>{K.getAll().then(g=>k(g.data))},[]),l.useEffect(()=>{W.getById(a).then(({data:g})=>{var C,P;i(g.name||""),f(g.location||"");const j=g.caregiver;j&&j.length>0?(u([]),j.forEach(z=>{K.getById(z).then(({data:_})=>{u(Re=>[...Re,_.name])}).catch(_=>console.log(_))})):u([]),h(Ve((C=g.start)==null?void 0:C.toString())||""),M(Ve((P=g.end)==null?void 0:P.toString())||""),y(g.details||"")}).catch(g=>console.log(g))},[a]);const q=(g,j)=>{const C=[...c];C[g]=j.target.value,u(C)},U=()=>{u([...c,""])},N=g=>{const j=[...c];j.splice(g,1),u(j)},I=()=>{if(!A())return;const g=[];for(let C of v)c.includes(C.name)&&g.push(C._id);console.log(g);const j={name:o,caregiver:g,location:d,start:new Date(b),end:new Date(m),details:S,patient:s.patient,status:"waiting"};W.updateById(a,j).then(()=>t()).catch(C=>console.log(C)),r()},A=()=>{let g=!0,j={procedureName:"",caregivers:"",location:"",startTime:"",endTime:"",details:""};return o.trim()||(j.procedureName="Procedure name is required.",g=!1),(c.length===0||c.every(C=>!C.trim()))&&(j.caregivers="At least one caregiver is required.",g=!1),d.trim()||(j.location="Location is required.",g=!1),b.trim()||(j.startTime="Start time is required.",g=!1),m.trim()?new Date(b)>=new Date(m)&&(j.endTime="End time must be later than start time.",g=!1):(j.endTime="End time is required.",g=!1),S.trim()||(j.details="Details are required.",g=!1),B(j),g};return e.jsx("div",{children:e.jsx($,{open:n,onClose:r,"aria-labelledby":"procedure-modal-title",children:e.jsxs(p,{sx:Ro,children:[e.jsx(D,{id:"procedure-modal-title",variant:"h6",component:"h2",color:"common.white",children:"Procedure Information"}),e.jsx(E,{required:!0,id:"procedure-name",label:"Procedure Name",value:o,onChange:g=>{i(g.target.value),B(j=>({...j,procedureName:""}))},error:!!T.procedureName,helperText:T.procedureName,sx:fe}),c.map((g,j)=>e.jsxs(p,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(E,{required:!0,label:"Caregiver",value:g,onChange:C=>{q(j,C),B(P=>({...P,caregivers:""}))},error:!!T.caregivers&&j===0,helperText:j===0?T.caregivers:"",sx:{...fe,flex:1}}),e.jsx(w,{onClick:()=>N(j),sx:{mx:1},children:"Remove"})]},j)),e.jsx(w,{onClick:U,sx:{my:2},children:"Add Caregiver"}),e.jsx(E,{required:!0,id:"location",label:"Location",value:d,onChange:g=>{f(g.target.value),B(j=>({...j,location:""}))},error:!!T.location,helperText:T.location,sx:fe}),e.jsx(E,{required:!0,id:"start-time",label:"Start Time",type:"datetime-local",value:b,onChange:g=>{h(g.target.value),B(j=>({...j,startTime:"",endTime:""}))},error:!!T.startTime,helperText:T.startTime,InputLabelProps:{shrink:!0},sx:fe}),e.jsx(E,{required:!0,id:"end-time",label:"End Time",type:"datetime-local",value:m,onChange:g=>{M(g.target.value),B(j=>({...j,endTime:""}))},error:!!T.endTime,helperText:T.endTime,InputLabelProps:{shrink:!0},sx:fe}),e.jsx(E,{id:"procedure-detail",label:"Procedure Detail",value:S,onChange:g=>{y(g.target.value),B(j=>({...j,details:""}))},error:!!T.details,helperText:T.details,multiline:!0,rows:4,sx:fe}),e.jsxs(p,{sx:{mt:2,display:"flex",justifyContent:"space-around"},children:[e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:I,children:"Confirm"}),e.jsx(w,{variant:"contained",color:"primary",style:{backgroundColor:"#253237",color:"#ffffff"},onClick:r,children:"Cancel"})]})]})})})}function Ve(n){const r=new Date(n);function a(u){return u.toString().padStart(2,"0")}const s=r.getFullYear(),t=a(r.getMonth()+1),o=a(r.getDate()),i=a(r.getHours()),c=a(r.getMinutes());return`${s}-${t}-${o}T${i}:${c}`}function _o(){const[n,r]=l.useState({}),[a,s]=l.useState(!1),[t,o]=l.useState(!1),[i,c]=l.useState(""),[u,d]=l.useState([]),[f,b]=l.useState(!1),{id:h}=Fe();l.useEffect(()=>{pe.getById(h).then(k=>r(k.data)).catch(k=>console.log(k))},[]),l.useEffect(()=>{m()},[n,f]);const m=()=>{W.getAll().then(k=>d(k.data)).catch(k=>console.log(k))},M=()=>{b(k=>!k)},S=k=>{const T=[...n.procedures,k],B={...n,procedures:T};r(B)},y=k=>{W.deleteById(k).then(()=>{const T=u.filter(U=>U._id!==k);d(T);const B=n.procedures.filter(U=>U!==k),q={...n,procedures:B};Q.updateById(n._id,q)}).catch(T=>console.log(T))},v=k=>{c(k),o(!0)};return e.jsx(G,{id:"app",children:e.jsxs(p,{sx:{flexGrow:1,mt:8},children:[e.jsx(ae,{cred:!0}),e.jsx(Se,{}),e.jsx(Eo,{templatePathway:n}),e.jsx(Bo,{templatePathway:n,allProcedures:u,handleDeleteProcedure:y,handleEditProcedure:v}),e.jsx(No,{handleAddProcedure:()=>{s(!0)}}),e.jsx(Ao,{showModal:a,handleClose:()=>s(!1),templatePathway:n,updatePathway:S}),e.jsx(qo,{modalOpen:t,procedureToEditId:i,handleClose:()=>o(!1),pathway:n,refetchProcedures:M})]})})}const V=({children:n,allowedRoles:r})=>{const{auth:a}=l.useContext(Ae),s=a.role&&r.includes(a.role);return a.loggedIn&&s?n:e.jsx(Rt,{to:"/login",replace:!0})},Lo=qt([{path:"/",element:e.jsx(Vt,{})},{path:"/login",element:e.jsx(Hr,{})},{path:"/forgetPassword",element:e.jsx(Jr,{})},{path:"/manager-pathway",element:e.jsx(V,{allowedRoles:["manager"],children:e.jsx(lr,{})})},{path:"/manager-pathway/:id",element:e.jsxs(V,{allowedRoles:["manager"],children:[" ",e.jsx(kr,{})]})},{path:"/manager-template",element:e.jsx(V,{allowedRoles:["manager"],children:e.jsx(Mo,{})})},{path:"/manager-template/:id",element:e.jsx(V,{allowedRoles:["manager"],children:e.jsx(_o,{})})},{path:"/resources",element:e.jsx(V,{allowedRoles:["manager"],children:e.jsx(ko,{})})},{path:"/messages/manager",element:e.jsx(V,{allowedRoles:["manager"],children:e.jsx(Le,{})})},{path:"/accounts",element:e.jsx(V,{allowedRoles:["admin"],children:e.jsx(qr,{})})},{path:"/messages/admin",element:e.jsxs(V,{allowedRoles:["admin"],children:[e.jsx(Le,{})," "]})},{path:"/messages/caregiver",element:e.jsx(V,{allowedRoles:["caregiver"],children:e.jsx(Le,{})})},{path:"/schedule",element:e.jsx(V,{allowedRoles:["caregiver"],children:e.jsx(Qr,{})})},{path:"/schedule/:id",element:e.jsx(V,{allowedRoles:["caregiver"],children:e.jsx(co,{})})}]);_t.createRoot(document.getElementById("root")).render(e.jsx(Z.StrictMode,{children:e.jsx(Yt,{children:e.jsx(Lt,{router:Lo})})}));
